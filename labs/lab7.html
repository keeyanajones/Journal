<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Code Journal: Lab  SQL &amp; R</title>   
    <!-- Latest compiled and minified CSS -->
    <!-- Font Awesome 5.7.0 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" 
    integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" 
    crossorigin="anonymous">
    <!-- Bootstrap 4.3.1 -->    
    <link rel="stylesheet" 
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" 
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" 
          crossorigin="anonymous">   
    <!-- Highlight.js 9.13.1 -->     
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/androidstudio.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>    
    <script>hljs.initHighlightingOnLoad();</script>          

    <!-- Custom Style Pygment and Icons -->
    <link rel="stylesheet" href="../assets/stylesheets/styles.css">
    <link rel="stylesheet" href="../assets/stylesheets/pygment_trac.css">
    <link rel="icon" href="../assets/images/favicon.ico" type="image/gif">
    <link rel="shortcut icon" href="../assets/images/favicon.png">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    </head>    

  <body>
    <div class="wrapper">               
    <!-- Header -->         
      <header>
          <img src="../assets/images/pb_Image.png" class="img-fluid" alt="me"/>
        <p class="view">A Code Journal for 
            <span class="fab fa-git-square" aria-hidden="true"></span>
                Hub Pages<br/>        
                
            <a href="https://github.com/keeyanajones/Journal" target="_blank">
            <span class="fab fa-github"></span> 
              View the Code Journal on GitHub</a></p>
                      
            <!-- Buttons -->                        
           <a class="btn btn-md btn-default" href="../appendix-projects/index.html#java" role="button">            
                <span class="fab fa-java fa-2x"></span> 
            </a>                   
            
           <a class="btn btn-md btn-default" href="../appendix-projects/index.html#python" role="button">
                <span class="fab fa-python fa-2x"></span> 
            </a>                        

           <a class="btn btn-md btn-default" href="../appendix-projects/index.html#node" role="button">
                <span class="fab fa-node fa-3x"></span> 
            </a>                
            
           <a class="btn btn-md btn-default" href="../appendix-projects/index.html#javascript" role="button">
                <span class="fab fa-js fa-2x"></span> 
            </a>                              

            <br/><br/>
            
            <a href="https://github.com/keeyanajones/">
            <small><span class="fab fa-github-alt"></span>                 
            Repositories and latest Contribution Activity</small></a>                 
              
        <br/>
        
        <!-- Download, Clone, or Fork -->
        <ul>    
          <li><a href="https://github.com/keeyanajones/Journal/archive/master.zip">
              <span class="fa fa-file-archive" aria-hidden="true"></span><br/>
                  Download <br/> ZIP</a></li>                  
          <li><a href="https://github.com/keeyanajones/Journal">
              <span class="fa fa-clone" aria-hidden="true"></span><br/>
                  Clone <br/> Desktop</a></li>                  
          <li><a href="https://github.com/keeyanajones/Journal">
              <span class="fa fa-code-branch" aria-hidden="true"></span><br/>
                  Fork On <br/> GitHub</a></li>
        </ul>                                 
      </header>
    <!-- ./header --> 
    </div>          
      
    <section>
        <h2><span class="fas fa-flask" aria-hidden="true"></span>
              <a name="lab7" class="anchor" href="#lab7">
              <span class="header-link"></span></a>
                Lab:  SQL &amp; R </h2>                  
     
        <p><sup><span class="fa fa-calendar"></span>
                Last updated on March 17th, 2020</sup></p>
                                                                     
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <span class="fa fa-bookmark"></span> 
                <a href="../index.html">Home</a></li>      
            <li class="breadcrumb-item">
                <span class="fa fa-bookmark"></span> 
                <a href="../learning-plan/index.html">         
                    Learning Plan</a></li>
            <li class="breadcrumb-item">
                <span class="fa fa-bookmark"></span> 
                <a href="../labs/index.html">        
                    Labs</a></li>    
            <li class="breadcrumb-item active" aria-current="sqlr">
                <span class="fa fa-bookmark"></span>         
                SQL &amp; R</li>
          </ol>
        </nav>                  
                
        <a name="lab7" id="lab7"></a>            
        <p>This section includes information about  SQL &amp; R labs.</p>

        <h4>EXERCISES</h4>

        <ul>
            <li>Exercise 0 : SQL </li>
            <li>Exercise 1 : R</li>    
        </ul>
        

        <a name="sql" class="anchor" href="#sql"></a>        
        <h3>Exercise 0 : SQL </h3>
        <p>SQL is a standard language for accessing and manipulating 
           databases.  
           
         <h4>What is SQL?</h4>

         <ul>
            <li>SQL stands for Structured Query Language</li>
            <li>SQL lets you access and manipulate databases</li>
            <li>SQL became a standard of the (ANSI) in 1986, and 
                (ISO) in 1987</li>
         </ul>

         <h4>What Can SQL do?</h4>

         <ul>
            <li>SQL can execute queries against a database</li>
            <li>SQL can retrieve data from a database</li>
            <li>SQL can insert records in a database</li>
            <li>SQL can update records in a database</li>
            <li>SQL can delete records from a database</li>
            <li>SQL can create new databases</li>
            <li>SQL can create new tables in a database</li>
            <li>SQL can create stored procedures in a database</li>
            <li>SQL can create views in a database</li>
            <li>SQL can set permissions on tables, procedures, and views</li>
         </ul>

      <h4>SQL is a Standard - BUT....</h4>

      <p>Although SQL is an ANSI/ISO standard, there are different versions 
         of the SQL language.</p>

      <p>However, to be compliant with the ANSI standard, they all support at 
         least the major commands (such as SELECT, UPDATE, DELETE, INSERT, WHERE) 
         in a similar manner.</p>

      <p>Note: Most of the SQL database programs also have their own proprietary 
               extensions in addition to the SQL standard!</p>

               <h4>REQUIRED RESOURCES</h4>
               <p>You will need a a text editor, preferably with syntax highlighting. 
                  A few options is Netbeans, Atom, Sublime Text, available on OS X, 
                  Windows and Linux. You will need a web browser that includes a 
                  debugger such as Chrome or Firefox or Edge. Apple disabled the Safari
                  debugger by default, so read instructions to enable it first.</p>
       
               <h4>MATERIALS</h4>
               <p>List everything needed to complete your experiment. <br/>
                   
                   <span class="fas fa-external-link-alt"></span> 
                   <a href="https://www.w3schools.com/sql/default.asp" target="_blank"> 
                     https://www.w3schools.com/sql/default.asp</a><br/>
                   
                   <span class="fas fa-external-link-alt"></span> 
                   <a href="https://www.w3schools.com/sql/sql_quickref.asp" target="_blank"> 
                     https://www.w3schools.com/sql/sql_quickref.asp</a><br/>
              
                   <span class="fas fa-external-link-alt"></span> 
                   <a href="https://en.wikipedia.org/wiki/SQL" target="_blank"> 
                     https://en.wikipedia.org/wiki/SQL</a><br/>
                   
                </p>			  
       
               <p>Please check the 
                   <a href="material.md" target="_blank">
                     materials.md</a> file.</p>  
       
               <p>Download the files required 
                   <a href="lab7Required.zip" target="_blank">here</a> 
                   and the complete solution for this lab 
                   <a href="lab7Solution.zip" target="_blank">here</a>.</p>
       
               <h4>VIDEOS</h4>
       
               <p>Helpful videos selected by me:</p>
               
               <span class="fas fa-external-link-alt"></span> 
               SQL
               
               <ul>            
                 <li><a href="https://www.youtube.com/watch?v=HXV3zeQKqGY" target="_blank"> 
                  https://www.youtube.com/watch?v=HXV3zeQKqGY</a></li>
               
                 <li><a href="https://www.youtube.com/watch?v=7S_tz1z_5bA" target="_blank"> 
                   https://www.youtube.com/watch?v=7S_tz1z_5bA</a></li>
               </ul>
               

      <h4>Using SQL in Your Web Site</h4>

      <p>To build a web site that shows data from a database, you will need:</p>

      <ul>
         <li>An RDBMS database program (i.e. MS Access, SQL Server, MySQL)</li>
         <li>To use a server-side scripting language, like PHP or ASP</li>
         <li>To use SQL to get the data you want</li>
         <li>To use HTML / CSS to style the page</li>
      </ul>

      <h4>RDBMS</h4>

      <p>RDBMS stands for Relational Database Management System.</p>

      <p>RDBMS is the basis for SQL, and for all modern database systems such 
         as MS SQL Server, IBM DB2, Oracle, MySQL, and Microsoft Access.</p>

      <p>The data in RDBMS is stored in database objects called tables. A table 
         is a collection of related data entries and it consists of columns and 
         rows.</p>

        <p>Look at the "Customers" table:</p>

Example
<pre><code>
SELECT * FROM Customers;
</code></pre>

        <p>Every table is broken up into smaller entities called fields. The fields 
           in the Customers table consist of CustomerID, CustomerName, ContactName, 
           Address, City, PostalCode and Country. A field is a column in a table 
           that is designed to maintain specific information about every record in 
           the table.</p>
         <ul>
         <li>A record, also called a row, is each individual entry that exists in a
            table. For example, there are 91 records in the above Customers table. 
            A record is a horizontal entity in a table.</li>

         <li>A column is a vertical entity in a table that contains all information 
            associated with a specific field in a table.</li>
         </ul>            

         <h3>SQL </h3>
         <p>SQL is a domain-specific language used in programming and designed for 
            managing data held in a relational database management system (RDBMS), 
            or for stream processing in a relational data stream management system 
            (RDSMS). It is particularly useful in handling structured data, i.e. 
            data incorporating relations among entities and variables.<br/><br/>
            
            SQL offers two main advantages over older readâ€“write APIs such as ISAM or 
            VSAM. Firstly, it introduced the concept of accessing many records with 
            one single command. Secondly, it eliminates the need to specify how to 
            reach a record, e.g. with or without an index. Some of The Most Important 
            SQL Commands:</p>
 
          <ul>
             <li>SELECT - extracts data from a database</li>
             <li>UPDATE - updates data in a database</li>
             <li>DELETE - deletes data from a database</li>
             <li>INSERT INTO - inserts new data into a database</li>
             <li>CREATE DATABASE - creates a new database</li>
             <li>ALTER DATABASE - modifies a database</li>
             <li>CREATE TABLE - creates a new table</li>
             <li>ALTER TABLE - modifies a table</li>
             <li>DROP TABLE - deletes a table</li>
             <li>CREATE INDEX - creates an index (search key)</li>
             <li>DROP INDEX - deletes an index</li>
          </ul>
 
          <h5>SQL EXAMPLE : SELECT - extracts data from a database</h5>
 
          <p>The SELECT statement is used to select data from a database. The data 
             returned is stored in a result table, called the result-set.</p>
 
 <pre><code>
 SELECT Syntax
 SELECT column1, column2, ...
 FROM table_name;
 </code></pre>
 
          <p>Here, column1, column2, ... are the field names of the table you want 
             to select data from. If you want to select all the fields available in 
             the table, use the following syntax:</p>
 
 <pre><code>
 SELECT * FROM table_name; 
 </code></pre>
 
 
 
          <h5>SQL EXAMPLE : UPDATE - updates data in a database</h5>
 
 <p>The UPDATE statement is used to modify the existing records in a table.</p>
 
 <pre><code>
 UPDATE table_name
 SET column1 = value1, column2 = value2, ...
 WHERE condition;
 </code></pre>
 
          <p>Note: Be careful when updating records in a table! Notice the WHERE clause 
                   in the UPDATE statement. The WHERE clause specifies which record(s) 
                   that should be updated. If you omit the WHERE clause, all records in 
                   the table will be updated!</p>
 
          <h6>UPDATE Table</h6>
 
          <p>The following SQL statement updates the first customer 
             (CustomerID = 1) with a new contact person and a new city.</p>
 
 <pre><code>
 UPDATE Customers
 SET ContactName = 'Alfred Schmidt', City= 'Frankfurt'
 WHERE CustomerID = 1;
 </code></pre>
 
          <h6>UPDATE Multiple Records</h6>
 
          <p>It is the WHERE clause that determines how many records will be updated.
             The following SQL statement will update the contactname to "Juan" for all 
             records where country is "Mexico":</p>
 
 <pre><code>
 UPDATE Customers
 SET ContactName='Juan'
 WHERE Country='Mexico';
 </code></pre>
 
          <h6>Update Warning!</h6>
 
          <p>Be careful when updating records. If you omit the WHERE clause, ALL records 
             will be updated!</p>
 
 <pre><code>
 UPDATE Customers
 SET ContactName='Juan';
 </code></pre>
 
          <h5>SQL EXAMPLE : DELETE - deletes data from a database</h5>
 
          <p>The DELETE statement is used to delete existing records in a table.</p>
 
 <pre><code>
 DELETE FROM table_name WHERE condition;
 </code></pre>
 
          <p>Note: Be careful when deleting records in a table! Notice the WHERE clause 
                   in the DELETE statement. The WHERE clause specifies which record(s) 
                   should be deleted. If you omit the WHERE clause, all records in the 
                   table will be deleted!</p>
 
          <p>The following SQL statement deletes the customer "Alfreds Futterkiste" 
             from the "Customers" table:</p>
 
 <pre><code>
 DELETE FROM Customers WHERE CustomerName='Alfreds Futterkiste';
 </code></pre>
 
          <h6>Delete All Records</h6>
 
          <p>It is possible to delete all rows in a table without deleting the table. 
             This means that the table structure, attributes, and indexes will be intact:</p>
 
 <pre><code>
 DELETE FROM table_name;
 </code></pre>
 
          <p>The following SQL statement deletes all rows in the "Customers" table, 
             without deleting the table:</p>
 
 <pre><code>
 DELETE FROM Customers;
 </code></pre>
 
          <h5>SQL EXAMPLE : INSERT INTO - inserts new data into a database</h5>
 
          <p>The INSERT INTO statement is used to insert new records in a table.</p>
 
          <h6>INSERT INTO Syntax</h6>
 
          <p>It is possible to write the INSERT INTO statement in two ways.</p>
 
          <ul>
             <li>The first way specifies both the column names and the values to be inserted:</li>
 
 <pre><code>
 INSERT INTO table_name (column1, column2, column3, ...)
 VALUES (value1, value2, value3, ...);
 </code></pre>
 
             <li>If you are adding values for all the columns of the table, you do not 
                 need to specify the column names in the SQL query. However, make sure 
                 the order of the values is in the same order as the columns in the 
                 table. The INSERT INTO syntax would be as follows:</li>
 
 <pre><code>
 INSERT INTO table_name
 VALUES (value1, value2, value3, ...); 
 </code></pre>
 
          </ul>
 
          <h6>INSERT INTO Example</h6>
 
          <p>The following SQL statement inserts a new record in the "Customers" table:</p>
 
 <pre><code>
 INSERT INTO Customers (CustomerName, 
                        ContactName, 
                        Address, 
                        City, 
                        PostalCode, 
                        Country)
 VALUES ('Cardinal', 
         'Tom B. Erichsen', 
         'Skagen 21', 
         'Stavanger', 
         '4006', 
         'Norway');
 </code></pre>
 
          <h6>Insert Data Only in Specified Columns</h6>
 
          <p>It is also possible to only insert data in specific columns.</p>
          
          <p>The following SQL statement will insert a new record, but only insert 
             data in the "CustomerName", "City", and "Country" columns (CustomerID 
             will be updated automatically):</p>
 
 <pre><code>
 INSERT INTO Customers (CustomerName, City, Country)
 VALUES ('Cardinal', 'Stavanger', 'Norway');
 </code></pre>
 
          <h5>SQL EXAMPLE : CREATE DATABASE - creates a new database</h5>
 
          <p>The CREATE DATABASE statement is used to create a new SQL database.</p>
 
 <pre><code>   
 CREATE DATABASE databasename;
 CREATE DATABASE Example
 </code></pre>
 
          <p>The following SQL statement creates a database called "testDB":</p>
 
 <pre><code>
 CREATE DATABASE testDB;
 </code></pre>
 
          <p>Tip: Make sure you have admin privilege before creating any database. 
                  Once a database is created, you can check it in the list of 
                  databases with the following SQL command: SHOW DATABASES;</p>
 
          <h5>SQL EXAMPLE : ALTER DATABASE - modifies a database</h5>
          
          <p>The ALTER DATABASE statement is used to modify, maintain, or recover 
          an existing database.</p>
 
 
 Oracle 10G and later:
 ALTER TABLE table_name
 MODIFY column_name datatype; 
 
 
          <p>In SQL 2012 the alter command modifies a database or the file and 
             filegroups which are associated with the database. You can add or 
             remove files from as database, changes the attributes of a database 
             or its files and filegroups, changes the database collation, and 
             sets database options.</p>
 
          <p>To a databases name, use the following syntax:</p>
 
 <pre><code>
 ALTER database database_name
 </code></pre>
 
 or
 
 <pre><code>
 ALTER DATABASE { database_name  | current } 
    { 
       MODIFY NAME = new_database_name 
    }
 </code></pre>
 
 Alter database in PostgreSQL [9.2]
 
 <pre><code>
 ALTER DATABASE name [ [ WITH ] option [ ... ] ]
 where option can be:
     CONNECTION LIMIT connlimit
 ALTER DATABASE name RENAME TO new_name
 ALTER DATABASE name OWNER TO new_owner
 ALTER DATABASE name SET TABLESPACE new_tablespace
 ALTER DATABASE name SET configuration_parameter 
    { TO | = } { value | DEFAULT }
 ALTER DATABASE name SET configuration_parameter FROM CURRENT
 ALTER DATABASE name RESET configuration_parameter
 ALTER DATABASE name RESET ALL
 </code></pre>
 
 Alter database in MySQL [5.6]
 
 <pre><code>
 ALTER {DATABASE | SCHEMA} [db_name]
     alter_specification ...
 ALTER {DATABASE | SCHEMA} db_name
     UPGRADE DATA DIRECTORY NAME
 alter_specification:
     [DEFAULT] CHARACTER SET [=] char set_name
   | [DEFAULT] COLLATE [=] collation _name
 
 </code></pre>
 
       
          <h5>SQL EXAMPLE : CREATE TABLE - creates a new table</h5>
 
          <p>The CREATE TABLE statement is used to create a new table in a database.</p>
 
 <pre><code>
 CREATE TABLE table_name (
     column1 datatype,
     column2 datatype,
     column3 datatype,
    ....
 );
 </code></pre>
 
          <p>The column parameters specify the names of the columns of the table.</p>
 
          <p>The datatype parameter specifies the type of data the column can 
             hold (e.g. varchar, integer, date, etc.).</p>
 
          <p>Tip: For an overview of the available data types, go to our complete 
                  Data Types Reference.</p>
 
          <h6>SQL CREATE TABLE Example</h6>
 
          <p>The following example creates a table called "Persons" that contains five
             columns: PersonID, LastName, FirstName, Address, and City:
 
 <pre><code>
 CREATE TABLE Persons (
     PersonID int,
     LastName varchar(255),
     FirstName varchar(255),
     Address varchar(255),
     City varchar(255)
 );
 </code></pre>
 
          <p>The PersonID column is of type int and will hold an integer.</p>
 
          <p>The LastName, FirstName, Address, and City columns are of type 
             varchar and will hold characters, and the maximum length for these 
             fields is 255 characters.</p>
 
          <p>Tip: The empty "Persons" table can now be filled with data with the 
                  SQL INSERT INTO statement.</p>
 
          <h6>Create Table Using Another Table</h6>
 
          <p>A copy of an existing table can also be created using CREATE TABLE.</p>
 
          <p>The new table gets the same column definitions. All columns or specific 
             columns can be selected.</p>
 
          <p>If you create a new table using an existing table, the new table will 
             be filled with the existing values from the old table.</p>
 
 <pre><code>
 CREATE TABLE new_table_name AS
     SELECT column1, column2,...
     FROM existing_table_name
     WHERE ....;
 </code></pre>
 
          <p>The following SQL creates a new table called "TestTables" 
          (which is a copy of the "Customers" table):</p>
 
 <pre><code>
 CREATE TABLE TestTable AS
 SELECT customername, contactname
 FROM customers; 
 </code></pre>
 
          <h5>SQL EXAMPLE : ALTER TABLE - modifies a table</h5>
 
          <p>The ALTER TABLE statement is used to add, delete, or modify 
             columns in an existing table.</p>
 
          <p>The ALTER TABLE statement is also used to add and drop various 
             constraints on an existing table.</p>
 
          <h6>ALTER TABLE - ADD Column</h6>
 
          <p>To add a column in a table, use the following syntax:</p>
 
 <pre><code>
 ALTER TABLE table_name
 ADD column_name datatype;
 </code></pre>
 
          <p>The following SQL adds an "Email" column to the "Customers" table:</p>
 
 <pre><code>
 ALTER TABLE Customers
 ADD Email varchar(255);
 </code></pre>
 
          <h6>ALTER TABLE - DROP COLUMN</h6>
 
          <p>To delete a column in a table, use the following syntax 
             (notice that some database systems don't allow deleting 
             a column):</p>
 
 <pre><code>            
 ALTER TABLE table_name
 DROP COLUMN column_name;
 </code></pre>
 
          <p>The following SQL deletes the "Email" column from the "Customers" table:</p>
 
 <pre><code>
 ALTER TABLE Customers
 DROP COLUMN Email;
 </code></pre>
 
          <h6>ALTER TABLE - ALTER/MODIFY COLUMN</h6>
 
          <p>To change the data type of a column in a table, use the following syntax:</p>
 
 SQL Server / MS Access:
 <pre><code>
 ALTER TABLE table_name
 ALTER COLUMN column_name datatype;
 </code></pre>
 
 My SQL / Oracle (prior version 10G):
 <pre><code>
 ALTER TABLE table_name
 MODIFY COLUMN column_name datatype;
 </code></pre>
 
 Oracle 10G and later:
 <pre><code>
 ALTER TABLE table_name
 MODIFY column_name datatype;
 </code></pre>
 
          <h6>SQL ALTER TABLE Example</h6>
 
          <p>Now we want to add a column named "DateOfBirth" in the "Persons" 
             table. We use the following SQL statement:</p>
 
 <pre><code>
 ALTER TABLE Persons
 ADD DateOfBirth date;
 </code></pre>
 
          <p>Notice that the new column, "DateOfBirth", is of type date and is going 
             to hold a date. The data type specifies what type of data the column can 
             hold. For a complete reference of all the data types available in 
             MS Access, MySQL, and SQL Server, go to our complete Data Types 
             reference.</p>
 
          <h6>Change Data Type Example</h6>
 
          <p>Now we want to change the data type of the column named 
             "DateOfBirth" in the "Persons" table.  We use the 
             following SQL statement:</p>
 
 <pre><code>
 ALTER TABLE Persons
 ALTER COLUMN DateOfBirth year;
 </code></pre>
 
          <p>Notice that the "DateOfBirth" column is now of type year and 
             is going to hold a year in a two- or four-digit format.</p>
 
 <pre><code>
 DROP COLUMN Example
 </code></pre>
 
          <p>Next, we want to delete the column named "DateOfBirth" in the 
             "Persons" table.  We use the following SQL statement:</p>
 
 <pre><code>
 ALTER TABLE Persons
 DROP COLUMN DateOfBirth;
 </code></pre>
 
          <h5>SQL EXAMPLE : DROP TABLE - deletes a table</h5>
 
          <p>The DROP TABLE statement is used to drop an existing table in a database.</p>
 
 <pre><code>
 DROP TABLE table_name;
 </code></pre>
 
          <p>Note: Be careful before dropping a table. Deleting a table 
                   will result in loss of complete information stored in 
                   the table!</p>
 
          <h6>SQL DROP TABLE Example</h6>
 
          <p>The following SQL statement drops the existing table "Shippers":</p>
 
 <pre><code>
 DROP TABLE Shippers;
 </code></pre>
 
          <h6>SQL TRUNCATE TABLE</h6>
 
          <p>The TRUNCATE TABLE statement is used to delete the data inside a 
             table, but not the table itself.</p>
 
 <pre><code>
 TRUNCATE TABLE table_name;
 </code></pre>
 
          <h5>SQL EXAMPLE : CREATE INDEX - creates an index (search key)</h5>
 
          <p>The CREATE INDEX statement is used to create indexes in tables.</p>
 
          <p>Indexes are used to retrieve data from the database very fast. The 
             users cannot see the indexes, they are just used to speed up 
             searches/queries.</p>
 
          <p>Note: Updating a table with indexes takes more time than updating a 
                   table without (because the indexes also need an update). So, 
                   only create indexes on columns that will be frequently searched 
                   against.</p>
 
          <h6>CREATE INDEX Syntax</h6>
 
          <p>Creates an index on a table. Duplicate values are allowed:</p>
 
 <pre><code>
 CREATE INDEX index_name
 ON table_name (column1, column2, ...);
 </code></pre>
        
          <h6>CREATE UNIQUE INDEX Syntax</h6>
 
          <p>Creates a unique index on a table. Duplicate values are not allowed:</p>
 
 <pre><code>
 CREATE UNIQUE INDEX index_name
 ON table_name (column1, column2, ...);
 </code></pre>
 
          <p>Note: The syntax for creating indexes varies among different 
                   databases. Therefore: Check the syntax for creating indexes 
                   in your database.</p>
 
          <h6>CREATE INDEX Example</h6>
 
          <p>The SQL statement below creates an index named "idx_lastname" on 
             the "LastName" column in the "Persons" table:</p>
 
 <pre><code>
 CREATE INDEX idx_lastname
 ON Persons (LastName);
 </code></pre>
 
          <p>If you want to create an index on a combination of columns, you can 
             list the column names within the parentheses, separated by commas:</p>
 
 <pre><code>
 CREATE INDEX idx_pname
 ON Persons (LastName, FirstName);
 </code></pre>
 
          <h5>SQL EXAMPLE : DROP INDEX - deletes an index (search key)</h5>
 
          <p>The DROP INDEX statement is used to delete an index in a table.</p>
 
 MS Access:
 <pre><code>
 DROP INDEX index_name ON table_name;
 </code></pre>
 
 SQL Server:
 <pre><code>
 DROP INDEX table_name.index_name;
 </code></pre>
 
 DB2/Oracle:
 <pre><code>
 DROP INDEX index_name;
 </code></pre>
 
 MySQL:
 <pre><code>
 ALTER TABLE table_name
 DROP INDEX index_name; 
 </code></pre>
 
 

         <a name="r" class="anchor" href="#r"></a>        
        <h3>Exercise 1 : R</h3>
        <p>R is a programming language and free software environment for statistical 
           computing and graphics supported by the R Foundation for Statistical 
           Computing.</p>


        <h4>What Can R do?</h4>
        <p>Data analysis with R is done in a series of steps; 
           programming, transforming, discovering, modeling and 
           communicate the results</p>
         <ul>
            <li>Program: R is a clear and accessible programming tool</li>
            <li>Transform: R is made up of a collection of libraries designed specifically for data science</li>
            <li>Discover: Investigate the data, refine your hypothesis and analyze them</li>
            <li>Model: R provides a wide array of tools to capture the right model for your data</li>
            <li>Communicate: Integrate codes, graphs, and outputs to a report with R Markdown or build Shiny apps to share with the world</li>
         </ul>

        <h4>What is R  used for?</h4>
         <ul>
            <li>Statistical inference</li>
            <li>Data analysis</li>
            <li>Machine learning algorithm</li>
        </ul>

        <h4>REQUIRED RESOURCES</h4>
        <p>You will need a a text editor, preferably with syntax highlighting. 
           A few options is Netbeans, Atom, Sublime Text, available on OS X, 
           Windows and Linux. You will need a web browser that includes a 
           debugger such as Chrome or Firefox or Edge. Apple disabled the Safari
           debugger by default, so read instructions to enable it first.</p>

        <h4>MATERIALS</h4>
        <p>List everything needed to complete your experiment. <br/>
            
            <span class="fas fa-external-link-alt"></span> 
            <a href="https://www.r-project.org" target="_blank"> 
              https://www.r-project.org</a><br/>
            
            <span class="fas fa-external-link-alt"></span> 
            <a href="https://en.wikipedia.org/wiki/R_(programming_language)" target="_blank"> 
               https://en.wikipedia.org/wiki/R_(programming_language)</a><br/>            

            <span class="fas fa-external-link-alt"></span> 
            <a href="https://www.getarchitect.io/" target="_blank"> 
               https://www.getarchitect.io</a><br/>                           

            <span class="fas fa-external-link-alt"></span> 
            <a href="https://www.getarchitect.io/getting-started/installation/" target="_blank"> 
               https://www.getarchitect.io/getting-started/installation/</a><br/>        
         </p>			  

        <p>Please check the 
            <a href="material.md" target="_blank">
              materials.md</a> file.</p>  

        <p>Download the files required 
            <a href="lab7Required.zip" target="_blank">here</a> 
            and the complete solution for this lab 
            <a href="lab7Solution.zip" target="_blank">here</a>.</p>

        <h4>VIDEOS</h4>

        <p>Helpful videos selected by me:</p>
        
        <span class="fas fa-external-link-alt"></span> 
        R
        
        <ul>
          <li><a href="https://www.youtube.com/watch?v=_V8eKsto3Ug" target="_blank"> 
            https://www.youtube.com/watch?v=_V8eKsto3Ug</a></li>
        
          <li><a href="https://www.youtube.com/watch?v=s3FozVfd7q4" target="_blank"> 
            https://www.youtube.com/watch?v=s3FozVfd7q4</a></li>
        </ul>
      
        <h3>R </h3>
        <p>R is a programming language and free software environment for statistical 
           computing and graphics supported by the R Foundation for Statistical 
           Computing. The R language is widely used among statisticians and data 
           miners for developing statistical software and data analysis. Polls, 
           data mining surveys, and studies of scholarly literature databases show 
           substantial increases in popularity; as of October 2019, R ranks 15th 
           in the TIOBE index, a measure of popularity of programming languages.</p>

R EXAMPLE : Workspace - list all variables in the workspace
<pre><code class="r">
> ls()
</code></pre>

R EXAMPLE : R Script - rectangle.r file can change and rerun script
<pre><code class="r">
height <- 2
width <- 4
area <- height * width

area
</code></pre>
 
R EXAMPLE : Data Types - logical
<pre><code class="r">
> TRUE
class(TRUE)
[1] "logical"

> FALSE
[1] FALSE

> class(NA)
[1] "logical"

> T
[1] TRUE

> F
[1] FALSE
</code></pre>

R EXAMPLE : Data Types - numeric
<pre><code class="r">
> 2
[1] 2

> 2.5
[1] 2.5

> 2L
[1] 2

> class(2)
[1] "numeric"

> class(2L)
[1] "integer"

# numeric not always integer
> is.numeric(2)
[1] TRUE

> is.numeric(2L)
[1] TRUE

# integer is numeric
> is.integer(2)
[1] FALSE

> is.integer(2L)
[1] TRUE
</code></pre>

R EXAMPLE : Data Types - character
<pre><code class="r">
> "I love data and science!"
[1] "I love data and science!"

> class("I love data and science!")
[1] "character"
</code></pre>

R EXAMPLE : Data Types - other atomic types
<pre><code class="r">
double: higher precision
complex: complex mubers
raw: store raw bytes
</code></pre>

R EXAMPLE : Data Types - coercion
<pre><code class="r">
> as.numeric(TRUE)
[1] 1

> as.numeric(FALSE)
[1] 0

> as.character(4)
[1] "4"

> as.numeric("4.5")
[1] 4.5

> as.integer("4.5")
[1] 4

> as.numeric("Hello")
[1] NA

Warning message:
NAs introduced by coercion
</code></pre>


<h4>Vectors</h4>

   Sequesnce of data elements the
   same basic type
   character, numeric, logical

R EXAMPLE : Data Types - create a vector
<pre><code class="r">
> c("hearts", "spades", "diamonds", "diamonds", "spades") 
[1] "hearts"  "spades"  "diamonds"  "diamonds"  "spades"

> drawn_suits <- c("hearts", "spades", "diamonds", 
                   "diamonds", "spades") 

> drawn_suits
[1] "hearts"  "spades"  "diamonds"  "diamonds"  "spades"

> is.vector(dawn_suits) 
[1] TRUE

> remain <- c(11, 12, 11, 13) 
> remain
[1] 11 12 11 13 
</code></pre>

R EXAMPLE : Data Types - name vector  
<pre><code class="r">
> suits <- c("spades", "hearts", "diamonds", "clubs") 
> names(remain) <- suits
> remain
  spades    hearts    diamonds    clubs
      11        12          11       13 

> remain <- c(spades = 11, hearts = 12, 
              diamonds = 11, clubs = 13) 

> remain <- c("spades" = 11, "hearts" = 12, 
              "diamonds" = 11, "clubs" = 13) 

> str(remain)
Named num [1:4] 11 12 11 13
- attr(*, "names")= chr [1:4] "spades" "hearts" "diamonds" 
                              "clubs"  
</code></pre>

R EXAMPLE : Data Types - single value = vector
<pre><code class="r">
> my_apples <- 5
> my_oranges <- "six"

> is.vector(my_apples)
[1] TRUE

> is.vector(my_oranges)
[1] TRUE

> length(my_apples)
[1] 1

> length(my_oranges)
[1] 1

> length(drawn_suits)
[1] 5
</code></pre>

Vectors are homogeneous
   only element of the same type
   atomic vectors <> lists
   automatic coercison if necessary 

R EXAMPLE : Data Types - coercion for vectors
<pre><code class="r">
> drawn_ranks <- c(7, 4, "A", 10, "K", 3, 2, "Q")

> drawn_ranks 
[1] "7" "4" "A" "10" "K" "3" "2" "Q"

> class(drawn_ranks)
[1] "character"
</code></pre>

R EXAMPLE : Data Types - Vector Calculus
<pre><code class="r">
> my_apples <- 5     # is a vector
> my_oranges <- 6    # is a vector
> my_apples + my_oranges
[1] 11

# Computations are performed element-wise

> earnings <- c(50, 100, 30)

> earnings * 3
[1] 150 300 90

> earnings/10 
[1] 5 10 3

> earnings - 20
[1] 30 80 10

> earnings + 100
[1] 150 200 130

> earnings^2
[1] 2500 10000 900

mathematics naturally extend
</code></pre>

R EXAMPLE : Data Types - Element-wise
<pre><code class="r">
> earnings <- c(50, 100, 30)
> expenses <- c(30, 40, 80)

> earnings - expenses 
[1] 20 60 -50 

> earnings + c(10, 20, 30) 
[1] 60 120 60 

# multiplication and division are done element wise

> earnings * c(1, 2, 3) 
[1] 50 200 90 

> earnings / c(1, 2, 3) 
[1] 50 50 10 
</code></pre>

R EXAMPLE : Data Types - Sum() and >
<pre><code class="r">
> earnings <- c(50, 100, 30)
> expenses <- c(30, 40, 80)

> bank <- earnings - expenses
> bank
[1] 20 60 -50

> sum(bank)
[1] 30 

> earnings > expenses 
[1] TRUE TRUE FALSE
</code></pre>



R EXAMPLE : Data Types - Subsetting vectors by index
<pre><code class="r">
> remain <- c(spades = 11, hearts = 12, 
              diamonds = 11, clubs = 13) 

> remain[1] # [1] -> take element at index 1
spades 
    11      # result is a (named vector tool)

> remain[3]
diamonds
      11
</code></pre>

R EXAMPLE : Data Types - Subsetting vectors by name
<pre><code class="r">
> remain <- c(spades = 11, hearts = 12, 
              diamonds = 11, clubs = 13)

> remain["spades"]
spades 
    11

> remain["diamonds"] 
diamonds 
      11
</code></pre>

R EXAMPLE : Data Types - Subsetting vectors by mutiple elements
<pre><code class="r">
> remain <- c(spades = 11, hearts = 12, 
              diamonds = 11, clubs = 13)

> remain_black <- remain[c(1, 4)]
> remain_black 
spades    clubs 
    11       13   # order in selction vector matters

> remain[c(4, 1)]
> remain_black 
clubs    spades 
   13        11   

> remain[c("clubs", "spades")]
clubs    spades 
   13        11 
</code></pre>

R EXAMPLE : Data Types - Subsetting vectors by all but some
<pre><code class="r">
> remain <- c(spades = 11, hearts = 12, 
              diamonds = 11, clubs = 13)

> remain[-1]
hearts diamonds  clubs 
    12       11     13   # all but index 1 are returned

> remain[-c(1, 2)]
diamonds   clubs 
      11      13 

> remain[-"spades"]
Error in -"spades" : invalid arument to unary operator
</code></pre>

R EXAMPLE : Data Types - Subsetting vectors by using logical vector
<pre><code class="r">
> remain <- c(spades = 11, hearts = 12, 
              diamonds = 11, clubs = 13)

> remain[c(FALSE, TRUE, FALSE, TRUE)]
hearts   clubs 
    12      13   

> selection_vector <- c(FALSE, TRUE, FALSE, TRUE)

> remain[seletion_vector]
hearts   clubs 
    12      13 

> remain[c(TRUE, FALSE)]
spades   diamonds   # R recycles c(T, F) to c(T, F, T, F) 
    11         11   # because its more values in the vector

# SO this runs 
> remain[c(TRUE, FALSE, TRUE, FALSE)]
spades   diamonds   
    11         11

> remain[c(TRUE, FALSE, TRUE)]
spades   diamonds   clubs   
    11         11      13   

# SO this runs 
> remain[c(TRUE, FALSE, TRUE, TRUE)]
spades   diamonds   clubs
    11         11      13
</code></pre>

R EXAMPLE : Data Types - Create a matrix
<pre><code class="r">
> matrix(1:6, nrow = 2)
     [,1] [,2] [,3]
[1,]    1    3    5  
[2,]    2    4    6
 
> matrix(1:6, ncol = 3)
     [,1] [,2] [,3]
[1,]    1    3    5  
[2,]    2    4    6

> matrix(1:6, nrow = 2, byrow = TRUE)
     [,1] [,2] [,3]
[1,]    1    2    3  
[2,]    4    5    6
</code></pre>

R EXAMPLE : Data Types - Create a matrix recycling
<pre><code class="r">
> matrix(1:3, nrow = 2, ncol = 3)
     [,1] [,2] [,3]
[1,]    1    3    2  
[2,]    2    1    3


> matrix(1:4, nrow = 2, ncol = 3)
     [,1] [,2] [,3]
[1,]    1    3    1  
[2,]    2    4    2
Warning message:
In matrix(1:4, nrow = 2, ncol = 3) :
  data length [4] is not a sub-multiple or multiple 
                  of the number of columns [3]   
</code></pre>

R EXAMPLE : Data Types - rbind(), cbind()
<pre><code class="r">
> cbind(1:3, 1:3)
     [,1] [,2] 
[1,]    1    1 
[2,]    2    2 
[3,]    3    3 

> rbind(1:3, 1:3)
     [,1] [,2] [,3]
[1,]    1    2    3 
[2,]    1    2    3 

> m <- matrix(1:6, byrow = TRUE, nrow = 2)

> rbind(m, 7:9)
     [,1] [,2] [,3]
[1,]    1    2    3 
[2,]    4    5    6
[3,]    7    8    9 

> cbind(m, c(10, 11))
     [,1] [,2] [,3] [,4]
[1,]    1    2    3   10         
[2,]    4    5    6   11
</code></pre>

R EXAMPLE : Data Types - Naming a matrix rownames(), colnames()
<pre><code class="r">
> m <- matrix(1:6, byrow = TRUE, nrow = 2)

> rownames(m) <- c("row1","row2")

> m 
     [,1] [,2] [,3] 
[row1]    1    2    3          
[row2]    4    5    6 

> colnames(m) <- c("col1","col2", "col3")

> m 
     [col1] [col2] [col3] 
[row1]    1    2    3          
[row2]    4    5    6 

> m <- matrix(1:6, byrow = TRUE, nrow = 2,
              dimnames = list(c("row1", "row2")
			      c("col1", "col2", "col3")))

> m 
     [col1] [col2] [col3] 
[row1]    1    2    3          
[row2]    4    5    6 
</code></pre>

R EXAMPLE : Data Types - Coercion
<pre><code class="r">
> num <- matrix(1:8, ncol = 2)
> num
     [,1] [,2] 
[1,]    1    5 
[2,]    2    6  
[3,]    3    7  
[4,]    4    8   

> char <- matrix(LETTERS[1:6], nrow = 4, ncol = 3)
>char
     [,1] [,2] [,3]
[1,] "A"  "E"  "C"
[2,] "B"  "F"  "D"
[3,] "C"  "A"  "E"
[4,] "D"  "B"  "F"

> num <- matrix(1:8, ncol = 2)
> char <- matrix(LETTERS[1:6], nrow = 4, ncol = 3)

> cbind(num, char)
     [,1] [,2] [,3] [,4] [,5] 
[1,] "1"  "5"  "A"  "E"  "C"
[2,] "2"  "6"  "B"  "F"  "D"
[3,] "3"  "7"  "C"  "A"  "E"
[4,] "4"  "8"  "D"  "B"  "F"

# contain different type?  list or data.frame
</code></pre>

R EXAMPLE : Data Types - Subsetting Matrices
<pre><code class="r">
> m <- matrix(sample(1:16, 12) nrow = 3)

> m 
     [,1] [,2] [,3] [,4] 
[1,]    5   11   15    3
[2,]   12   14    8    9
[3,]    6    1    4    2

> m[1,3]
[1] 15

> m[3,2]
[1] 1

# row first then col
</code></pre>

R EXAMPLE : Data Types - Subset column or row
<pre><code class="r">
> m 
     [,1] [,2] [,3] [,4] 
[1,]    5   11   15    3
[2,]   12   14    8    9
[3,]    6    1    4    2

> m[3,]
[1] 6 1 4 2

> m[,3]
[1] 15 8 4 

> m[4]
[1] 11

# if no comma it will go column to the number index

> m[9]
[1] 4
</code></pre>

R EXAMPLE : Data Types - Subset multiple elements
<pre><code class="r">
> m 
     [,1] [,2] [,3] [,4] 
[1,]    5   11   15    3
[2,]   12   14    8    9
[3,]    6    1    4    2

> m[2, c(2, 3)]
[1] 14  8

> m[c(1, 2), c(2,3)]
     [,1] [,2] 
[1,]   11   15 
[2,]   14    8 

> m[c(1, 3), c(1, 3, 4)]
     [,1] [,2] [,3]
[1,]    5   15    3
[2,]    6    4    2
</code></pre>

R EXAMPLE : Data Types - Subset by name
<pre><code class="r">
> rownames(m) <- c("r1", "r2", "r3")
> rownames(m) <- c("a", "b", "c", "d")
> m
     a    b   c   d
 r1  5   11  15   3   
 r2  12  14   8   9      
 r3  6    1   4   2   

> m[2, 3]
[1] 8

> m["r2","c"]
[1] 8

> m[2, "c"]
[1] 8

> m[3, c("c", "d")]
c d
4 2
</code></pre>

R EXAMPLE : Data Types - Subset with logical vector
<pre><code class="r">
> m
     a    b   c   d
 r1  5   11  15   3   
 r2  12  14   8   9      
 r3  6    1   4   2   

> m[c(FALSE, FALSE, TRUE),
    c(FALSE, FALSE, TRUE, TRUE)]
c d
4 2

> m[c(FALSE, FALSE, TRUE),
    c(FALSE, TRUE)]
b d
1 2

> m[c(FALSE, FALSE, TRUE),
    c(FALSE, TRUE, FALSE, TRUE)]
b d
1 2
</code></pre>

R EXAMPLE : Data Types - Matrix Arithmetic
<pre><code class="r">
> the_fellowship <- c(316, 556)
> two_towers <- c(343, 584)
> return_king <- c(378, 742)

> lotr_mtrix <- rbind(the_fellowship, two_towers, return_king)
> colnames(lotr_matrix) <- c("US", "non-US")
> colnames(lotr_matrix) <- c("Fellowship", "Two Towers", "Return King")

> lotr_matrix
             US  non-US
Fellowship  316     556
Two Towers  343     584
Return King 378     742
</code></pre>

R EXAMPLE : Data Types - Matrix - Scalar
<pre><code class="r">
> lotr_matrix / 1.12
                  US   non-US
Fellowship  282.1429 496.4286
Two Towers  306.2500 521.4286 
Return King 337.5000 662.5000

> lotr_matrix - 50
             US  non-US
Fellowship  266     506
Two Towers  293     534
Return King 328     692
</code></pre>

R EXAMPLE : Data Types - Matrix
<pre><code class="r">
# Definition of theater_cut omitted
> theater_cut
     [,1] [,2]
[1,]   50   50
[2,]   80   80
[3,]  100  100 

> lotr_matrix - theater_cut
             US  non-US
Fellowship  266     506
Two Towers  293     504
Return King 278     642
</code></pre>

R EXAMPLE : Data Types - Recycling
<pre><code class="r">
> lotr_matrix - c(50, 80, 100)
             US  non-US
Fellowship  266     506
Two Towers  263     504
Return King 278     642

> matrix(c(50, 80, 100), nrow =3, ncol = 2)
     [,1] [,2]
[1,]   50   50
[2,]   80   80
[3,]  100  100 
</code></pre>

R EXAMPLE : Data Types - Matrix Multiplication
<pre><code class="r">
# definition of rates omitted
> rates
       [,1]   [,2]
[1,]   1.11   1.11
[2,]   0.99   0.99
[3,]   0.82   0.82

> lotr_matrix * rates
             US     non-US
Fellowship  350.76  617.16
Two Towers  339.57  578.16
Return King 309.96  608.44
</code></pre>

R EXAMPLE : Data Types - Create factor factor()
<pre><code class="r">
> blood <- c("B", "AB", "O", "A", "O", "O", "A", "B")
> blood
[1] "B" "AB" "O" "A" "O" "O" "A" "B"

> blood_factor <- factor(blood)
> blood_factor
[1] B AB O A O O A B
Levels: A AB B O      # R sorts levels alphabetically!

>str(blood_factor)
Factor w/4 levels "A", "AB", "B", "O": 3 2 4 1 4 4 1 3
</code></pre>

R EXAMPLE : Data Types - Order levels differently
<pre><code class="r">
> blood_factor2 <- factor(blood, 
			  levels = c("O", "A", "B", "AB"))
> blood_factor2
[1] B AB O A O O A B
Levels: O A B AB 

> str(blood_factor2)
Factor w/4 levels "O", "A", "B", "AB": 3 4 1 2 1 1 2 3

>str(blood_factor)
Factor w/4 levels "A", "AB", "B", "O": 3 2 4 1 4 4 1 3
</code></pre>

R EXAMPLE : Data Types - Rename factor levels
<pre><code class="r">
> blood <- c("B", "AB", "O", "A", "O", "O", "A", "B")
> blood_factor <- factor(blood)

> levels(blood_factor) <- c("BT_A", "BT_AB", "BT_B", "BT_O")
> blood_factor
[1] BT_B BT_AB BT_O BT_A BT_O BT_O BT_A BT_B
Levels: BT_A  BT_AB BT_B BT_O

> factor(blood, labels = c("BT_A", "BT_AB", "BT_B", "BT_O"))
[1] BT_B BT_AB BT_O BT_A BT_O BT_O BT_A BT_B
Levels: BT_A  BT_AB BT_B BT_O

> blood <- c("B", "AB", "O", "A", "O", "O", "A", "B")
> blood_factor <- factor(blood)

# to cut down on confusion I will always do this 
> factor(blood, 
	 levels = c("O", "A", "B", "AB"),
	 labels = c("BT_O", "BT_A", "BT_B", "BT_AB"))
[1] BT_B BT_AB BT_O BT_A BT_O BT_O BT_A BT_B
Levels: BT_O BT_A BT_B BT_AB
</code></pre>

R EXAMPLE : Data Types - Nominal versus Ordinal
<pre><code class="r">
> blood <- c("B", "AB", "O", "A", "O", "O", "A", "B")
> blood_factor <- factor(blood)
> blood_factor[1] < blood_factor[2]
[1] NA
Warning message:
In Ops.factor(blood_factor[1], blood_factor[2]) :
  '<' not meaningful for factors

> tshirt <- c ("M", "L", "S", "S", "L", "M", "L", "M")

> tshirt_factor <- factor(tshirt, ordered = TRUE,
			  levels = c("S", "M", "L"))

> tshirt_factor 
[1] M L S S L M L M 
Levels: s < M < L			  )

> tshirt_factor[1] < tshirt_factor[2]
[1] TRUE
</code></pre>

R EXAMPLE : Data Types - Create list list()
<pre><code class="r">
> c("Rsome times", 190, 5)
[1] "Rsome times" "190" "5"

> list("Rsome times", 190, 5)
[[1]]  
[1] "Rsome times"

[[2]]
[1] 190

[[3]]
[1] 5

> song <- list("Rsome times", 190, 5)
> is.list(song)
[1] TRUE

> song <- list("Rsome times", 190, 5)
> names(song) <- c("title", "duration", "track")

> song
$title
[1] "Rsome times"

$duration
[1] 190

$track
[1] 5
</code></pre>

R EXAMPLE : Data Types - Name List
<pre><code class="r">
> song <- list(title = "Rsome times", 
               duration = 190, 
               track = 5)

> str(song)
List of 3
 $ title : chr "Rsome times"
 $ duration : num 190
 $ track : num 5
</code></pre>

R EXAMPLE : Data Types - List in List
<pre><code class="r">
> similar_song <- list(title = "R you on time?",
                       duration = 230)

> song <- list(title = "Rsome times", 
               duration = 190, 
               track = 5,
               similar = similar_song)

> str(song) 
List of 4
 $ title : chr "Rsome times"
 $ duration : num 190
 $ track : num 5
 $ similar: List of 2
  ..$ title : chr "R you on time?"
  ..$ duration : num 230
</code></pre>

R EXAMPLE : Subset and Extend Lists - The song list
<pre><code class="r">

> similar_song <- list(title = "R you on time?",
                       duration = 230)

> song <- list(title = "Rsome times", 
               duration = 190, 
               track = 5,
               similar = similar_song)

> str(song) 
List of 4
 $ title : chr "Rsome times"
 $ duration : num 190
 $ track : num 5   # Output of calling str(song)
 $ similar: List of 2
  ..$ title : chr "R you on time?"
  ..$ duration : num 230
</code></pre>

R EXAMPLE : [ versus [[ 
<pre><code class="r">
> song[1]
List of 1
 $ title: chr "Rsome times"

> song[[1]]
[1] "Rsome times"

> song[c(1, 3)]
List of 2
 $ title: chr "Rsome times"
 $ track: num 5

> song[[c(1, 3)]]
Error in song[[c(1, 3)]] :
            subscript out of bounds

> song[[1]][[3]]
Error in song[[1]][[3]] :
            subscript out of bounds

> song[[4]][[1]]
[1] "R you on time?"

> song[[c(4, 1)]]
[1] "R you on time?"
</code></pre>

R EXAMPLE : Subset by names
<pre><code class="r">
> song[["duration"]]
[1] 190

> song["duration"]
List of 1
 $ duration: num 190

> song[c("duration" "similar")]
List of 2
 $ duration: num 190
 $ similar: List of 2
 ..$ title : chr "R you on time?"
 ..$ duration: num 230
</code></pre>

R EXAMPLE : subset by logicals
<pre><code class="r">
> song[c(FALSE, TRUE, TRUE, FALSE)]
List of 2
 $ duration: num 190
 $ track: num 5

> song[[c(FALSE, TRUE, TRUE, FALSE)]]
Error : aemept to select less than one element

> song[[F]][[T]][[T]][[F]]
Error : aemept to select less than one element
</code></pre>

R EXAMPLE : $ and extending 
<pre><code class="r">
> song$duration 
[1] 190

> friends <- c("Kurt", "Florence", 
               "Patti", "Dave")

> song$sent <- friends
> song 
List of 5
 $ title : chr "Rsome times"
 $ duration : num 190
 $ track : num 5               
 $ similar: List of 2
  ..$ title : chr "R you on time?"
  ..$ duration : num 230
 $ sent : char [1:4] "Kurt" "Florence" "Patti" "Dave" 
</code></pre>

R EXAMPLE : Extending
<pre><code class="r">
> song[["sent"]] <- friends

> song$similar$reason <- "too long"

> song 
List of 5
 $ title : chr "Rsome times"
 $ duration : num 190
 $ track : num 5               
 $ similar: List of 3
  ..$ title : chr "R you on time?"
  ..$ duration : num 230
  ..$ reason : chr "too long"
 $ sent : char [1:4] "Kurt" "Florence" "Patti" "Dave" 
</code></pre>

R EXAMPLE : Wrap up
<pre><code class="r">
[[ or [ ?
   [[ to select list element
   [ results in sublist
[[ and $ to subset and extend lists
</code></pre>


R EXAMPLE : Explore the Data Frame
<pre><code>
Datasets
   observations
   variables
   example: people
      each person = observation
      properties (name, age...) = variables
   Matrix? need diffrent types
   List? not very practical

Data Frame
   specically for datasets
   rows =  observation (persons)
   columns variables (age, name, ...)
   contain eleents of different types
   elements in same column: same type

Create Data Frame
   import form data source
   csv file
   relational database (e.g. SQL)
   software packages (excel, SPSS...)
</code></pre>


R EXAMPLE : Create Data Frame  data.frame()
<pre><code class="r">
> name <- c("Anne", "Pete", "Frank", "Julia", "Cath")
> age <- c(28, 30, 21, 39, 35)
> child <- c(FALSE, TRUE, TRUE, FALSE, TRUE)

> df <- data.frame(name, age, child)

# column names match variable names

>df
  name  age  child
1 Anne   28  FALSE
2 Pete   30   TRUE
3 Frank  21   TRUE
4 Julia  39  FALSE
5 Cath   35   TRUE 		
</code></pre>

R EXAMPLE : Name Data Frame
<pre><code class="r">
> names (df) <-c("Name", "Age", "Child")
> df
  name  age  child
1 Anne   28  FALSE
2 Pete   30   TRUE
3 Frank  21   TRUE
4 Julia  39  FALSE
5 Cath   35   TRUE 		

> df <- data.frame(Name = name, Age = age, Child = child)
> df
  name  age  child
1 Anne   28  FALSE
2 Pete   30   TRUE
3 Frank  21   TRUE
4 Julia  39  FALSE
5 Cath   35   TRUE 		
</code></pre>

R EXAMPLE : Data Frame Structure
<pre><code class="r">
# Factor instead of character 

> str(df)
'data.frame': 5 obs. of 3 variables:
 $ Name : Factor w/5 Levels "Anne", "Pete", "Frank", "Julia", "Cath": 1 5 3 4 2
 $ Age : num 28 30 21 39 35
 $ Child ; logi FALSE TRUE TRUE FALSE TRUE

> data.frame(name[-1], age, child)
Error : arguments imply differing number of rows: 4, 5

> df <- data.frame(name, age, child, 
                   stringsAsFactors = FALSE)

> str(df)
'data.frame': 5 obs. of 3 variables:
 $ name : chr "Anne" "Pete" "Frank" "Julia" "Cath"
 $ age : num 28 30 21 39 35
 $ child ; logi FALSE TRUE TRUE FALSE TRUE
</code></pre>

R EXAMPLE : Subset - Extend - Sort  | Data Frames
<pre><code class="r">
Subset Data Frame
   Subsetting syntax from matrices and lists
   [ from matrices
   [[ and $ from lists

People
> name <- c("Anne", "Pete", "Frank", "Julia", "Cath")
> age <- c(28, 30, 21, 39, 35)
> child <- c(FALSE, TRUE, TRUE, FALSE, TRUE)
> people <- data.frame(name, age, child, 
                       stringsAsFActors = FALSE)

> people
   name age  child
1  Anne  28  FALSE 
2  Pete  30   TRUE
3 Frank  21   TRUE
4 Julia  39  FALSE
5  Cath  35   TRUE

> people[3, 2]
[1] 21

> people[3,"age"]
[1] 21

> people[3,]
    name age child
3  Frank  21 TRUE

> people[,"age"]
[1] 28 30 21 39 35

> people[c(3, 5), c ("age", "child")]
  age child
3  21  TRUE
5  35  TRUE

> people[2]
  age
1  28
2  30
3  21
4  39
5  35
</code></pre>

R EXAMPLE : Data Frame - List
<pre><code class="r">
> people$age
[1] 28 30 21 39 35

> people[["age"]]
[1] 28 30 21 39 35

> people[[2]]
.com[1] 28 30 21 39 35

> people["age"]
  age
1  28
2  30
3  21
4  39
5  35

> people[2]
  age
1  28
2  30
3  21
4  39
5  35
</code></pre>

R EXAMPLE : Extend Data Frame
<pre><code class="r">
   Add columns = add variables
   Add rows = add observations
</code></pre>

R EXAMPLE : Add Column
<pre><code class="r">
> height <- c(163, 177, 163, 162, 157)

> people$height <- height

> people[["height"]] <- height

> people
   name age  child height
1  Anne  28  FALSE    163 
2  Pete  30   TRUE    177
3 Frank  21   TRUE    163
4 Julia  39  FALSE    162
5  Cath  35   TRUE    157

> weight <- c(74, 63, 68, 55, 56)

> cbind(people, weight)
   name age  child height weight
1  Anne  28  FALSE    163     74
2  Pete  30   TRUE    177     63
3 Frank  21   TRUE    163     68
4 Julia  39  FALSE    162     55
5  Cath  35   TRUE    157     56
</code></pre>

R EXAMPLE : Add Row
<pre><code class="r">
> tom <- data.frame("Tom", 37, FALSE, 183)

> rbind(people, tom)
Error : names do not match previous names

> tom <- data.frame(name = "Tom", age = 37,
                    child = FALSE, height = 183)

> rbind(people, tom)
   name age  child height
1  Anne  28  FALSE    163
2  Pete  30   TRUE    177
3 Frank  21   TRUE    163
4 Julia  39  FALSE    162
5  Cath  35   TRUE    157
6   Tom  37  FALSE    183
</code></pre>

R EXAMPLE : Sorting
<pre><code class="r">
> sort(people$age)
[1] 21 28 30 35 39

> ranks <- order(people$age)
> ranks
[1] 3 1 2 5 4 

> people$age
[1] 28 30 21 39 35 

# 21 is lowest: its index, 3 comes first in ranks
# 28 is second lowest: its index, 1 comes second in ranks
# 39 is highest: its index, 4 comes last in ranks

> people[ranks, ]
   name age  child height
3 Frank  21   TRUE    163
1  Anne  28  FALSE    163
2  Pete  30   TRUE    177
5  Cath  35   TRUE    157
4 Julia  39  FALSE    162

> people[order(people$age, decreasing = TRUE), ]
   name age  child height
4 Julia  39  FALSE    162
5  Cath  35   TRUE    157
2  Pete  30   TRUE    177
1  Anne  28  FALSE    163
3 Frank  21   TRUE    163
</code></pre>


R EXAMPLE : Graphics in R - Basic Graphics
<ul>
   <li>Create plots with code</li>
   <li>Replication and modification easy</li>
   <li>Reproducibility</li>
   <li>Graphics package</li>
   <li>ggplot2, ggvis, lattice</li>
</ul>
   
<br/><br/>

R EXAMPLE : Graphics package
<pre><code class="r">
   Many functions
   plot() and hist()
   plot()
      Generic
      Different inputs -> Different plots
      Vectors, linear models, kernel densities...
</code></pre>

R EXAMPLE : Countries 
<pre><code class="r">
> str(countries)
 'data.frame': 194 obs. of 5 variables:
  $ name       : char "Afghanistan" "albania" "Algeria" ...
  $ continent  : Factor w/6 levels "Africa", "Asia", ...
  $ area       : int 648  29 2388 0 0 1247 0 0 2777 2777 ...
  $ population : int 16 3 20 0 0 7 0 0 28 28 ...
  $ religion   : Factor w/6 levels "Buddhist", "Catholic", ...
</code></pre>

R EXAMPLE : plot() 
<pre><code class="r">
> plot(countries$continent)
 # (categorical) Bar Chart

> plot(countries$population)
 # (numerical) index plot Chart

> plot(countries$area, countries$population)
 # (2x numerical) scatter plot Chart

> plot(log(countries$area), log(countries$population))
 # improved appearance (2x numerical) scatter plot Chart

> plot(countries$continent, countries$religion)
 # (2x Categorical) Stacked Bar Chart

 #     x-axis (horizontal)  y-axis (vertical)
> plot(countries$religion, countries$continent)
 # improved (2x Categorical) Stacked Bar Chart
</code></pre>

R EXAMPLE : hist()
<pre><code class="r">
   Short for histogram
   visual representation of distribution
   bin all values 
   plot frequency of bins
</code></pre>

R EXAMPLE : hist()
<pre><code class="r">
> africa_obs <- countries$continent == "Africa"
> africa <- countries[africa_obs, ]

> hist(africa$population)
# Histogram

> hist(africa$population, breaks = 10)
# improved Histogram
</code></pre>

R EXAMPLE : Other graphics functions
<pre><code class="r">
   barplot()
   boxplot()
   pairs()
</code></pre>

R EXAMPLE : Customizing Plots
<pre><code class="r">
Mercury 

> mercury
   temperature pressure
1            0   0.0002
2           20   0.0012 
3           40   0.0062    
4           60   0.0300   
5           80   0.0900    
6          100   0.2700       
7          120   0.7500      
8          140   1.8500         
9          160   4.2000            
10         180   8.8000         
11         200  17.3000           
...
19         360 806.0000           
</code></pre>

R EXAMPLE : Basic plot
<pre><code class="r">
> plot(mercury$temperature, mercury$pressure)
</code></pre>

R EXAMPLE : Fancy plot
<pre><code class="r">
> plot(mercury$temperature, mercury$pressure,
       xlab = "Temperature",         # horizontal axis label 
       ylab = "Pressure",            # vertical axis label
       main = "T vs P for Mercury",  # plot title 
       type = "o",                   # plot type l or o
       col = "orange")               # plot color 
</code></pre>

R EXAMPLE : Graphical Parameters
<pre><code class="r">
> plot(mercury$temperature, mercury$pressure, 
       col = "darkgreen")

> plot(mercury$temperature, mercury$pressure)
</code></pre>

R EXAMPLE : par()
<pre><code class="r">
> ?par
> par()
List of 72
 $ xlog       : logi FALSE
 $ ylog       : logi FALSE 
 $ adj        : num 0.5
 ...
 $ fin        : num [1:2] 8.31 6.89           
 $ font       : int 1             
 $ font.axis  : int 1                   
 $ font.lab   : int 1                 
 ...
 $ yaxs       : chr "r"  
 $ yaxt       : chr "s"
 $ ylbias     : num 0.2   

> par(col = "blue")
> plot(mercury$temperature, mercury$pressure)
> plot(mercury$pressure, mercury$temperature)
> par() $col
[1] "blue"
</code></pre>

R EXAMPLE : More Graphical Parameters
<pre><code class="r">
> plot(mercury$temperature, mercury$pressure,
       xlab = "Temperature",
       ylab = "Pressure",
       main = "T vs P for Mercury",  
       type = "o",  
       col = "orange",  
       col.main = "darkgray",  
       cex.axis = 0.6,  
       lty = 5,  
       pch= 4)
</code></pre>

R EXAMPLE : Multiple Plots

<ul>
  <li>Plot single source of data</li>
  <li>No combination of plots</li>
  <li>No different layers</li>
</ul>

<br/><br/>

R EXAMPLE : Shop
<pre><code class="r">
> str(shop)
'data.frame': 27 obs. of 5 variables;
 $ sales     : num 231 156 10 519 437 487 299 195 20 ... 
 $ ads       : num 8.2 6.9 3 12 10.6 ...  
 $ comp      : int 11 12 15 1 5 4 10 12 15 8 ... 
 $ inv       : int 294 232 149 600 567 571 512 347 212 ... 
 $ size_dist : num 8.2 4.1 4.3 16.1 14.1 ... 
</code></pre>

R EXAMPLE : mfrow parameter
<pre><code class="r">
> par(mfrow = c(2,2))
> plot(shop$ads, shop$sales)
> plot(shop$comp, shop$sales)
> plot(shop$inv, shop$sales)
> plot(shop$size_dist, shop$sales)

# 2x2 plots charts
</code></pre>

R EXAMPLE : mfcol parameter
<pre><code class="r">
> par(mfcol = c(2,2))
> plot(shop$ads, shop$sales)
> plot(shop$comp, shop$sales)
> plot(shop$inv, shop$sales)
> plot(shop$size_dist, shop$sales)

# 2x2 plots charts
# 2 rows and 2 cols
</code></pre>

R EXAMPLE : Reset the grid 
<pre><code class="r">
> par(mfrow = c(1, 1))
> plot(shop$sales, shop$ads)

# one big chart
</code></pre>

R EXAMPLE : Layout()
<pre><code class="r">
> grid <- matrix(c(1, 1 , 2, 3), nrow = 2,
                 ncol = 2, byrow = TRUE)
> grid
     [,1][,2]
[1,]    1   1
[2,]    2   3

> layout(grid)
> plot(shop$ads, shop$sales)
> plot(shop$comp, shop$sales)
> plot(shop$inv, shop$sales)
</code></pre>

R EXAMPLE : Reset the grid
<pre><code class="r">
> layout(1)
> par(mfcol = c(1,1))
</code></pre>

R EXAMPLE : Reset all parameters
<pre><code class="r">
> old_par <- par()

> par(col = "red")

> plot(shop$ads, shop$sales)
 
> par(old_par) 

> plot(shop$ads, shop$sales)
</code></pre>

R EXAMPLE : Stack graphical elements
<pre><code class="r">
> plot(shop$ads, shop$sales,
       pch = 16, col = 2,
       xlab = "advertisement",
       ylab = "net sales")

> lm_sales <- lm(shop$sales - shop$ads)

> abline(coef(lm_sales), lwd = 2)

> lines(shop$ads, shop$sales)

# some other functions
points()   segments() 
lines()    text()

> ranks <- order(shop$ads)

> plot(shop$ads, shop$sales,
       pch = 16, col = 2,
       xlab = "advertisement",
       ylab = "net sales")

> abline(coef(lm_sales), lwd = 2)

> lines(shop$ads[ranks], shop$sales[ranks])
</code></pre>

R EXAMPLE : Conditional Statements

R EXAMPLE : if statement
<pre><code class="r">
if(condition) {
  expr
}

> x <- -3

> if(x < 0) {
    print("x is a negative number") 
  }
[1] "x is a negative number"

> x <- 5

# FALSE
> if(x < 0) {
    print("x is a negative number") # Not Executed
  }
[1] "x is a negative number" # No Printout
</code></pre>

R EXAMPLE : else statement
<pre><code class="r">
if(condition) {
  expr1 
} else {
  expr2
}

> x <- -3

> if(x < 0) {
    print("x is a negative number") 
  } else {
    print("x is either a positive number or zero") 
  }

[1] "x is a negative number"

> x <- 5

> if(x < 0) {
    print("x is a negative number") 
  } else {
    print("x is either a positive number or zero") 
  }

[1] "x is a either a positive number or zero"
</code></pre>

R EXAMPLE : else if statement
<pre><code class="r">
if(condition1) {
  expr1 
} else if(condition2) {
  expr2
} else {
  expr3
}

> x <- -3

> if(x < 0) {
    print("x is a negative number") 
  } else if(x == 0) {
    print("x is a zero") 
  } else {
    print("x is a positive number") 
  }

[1] "x is a negative number"

> x <- 5

> if(x < 0) {
    print("x is a negative number") 
  } else if(x == 0) {
    print("x is a zero") 
  } else {
    print("x is a positive number") 
  }

[1] "x is a positive number"

> x <- 6
# TRUE
> if(x %% 2 == 0) {
    print("divisible by 2") 
  } else if(x %% 3 == 0) {               # not run
    print("divisible by 3")              # not run
  } else {                               # not run
    print("not divisible by 2 nor 3...") # not run
  }                                      # not run

[1] "divisible by 2"
</code></pre>

R EXAMPLE : Logical Operators

<ul>
   <li>AND operator &amp; </li>
   <li>OR operator | </li>
   <li>NOT operator ! </li>
</ul>

<br/><br/>

R EXAMPLE : AND operator &amp;
<pre><code class="r">
> TRUE & TRUE   # only TRUE if both are TRUE
[1] TRUE

> FALSE & TRUE
[1] FALSE

> TRUE & FALSE
[1] FALSE

> FALSE & FALSE
[1] FALSE

> x <- 12

# TRUE     TRUE
> x > 5 & x < 15
[1] TRUE

> x <- 17

# TRUE     FALSE
> x > 5 & x < 15
[1] FALSE
</code></pre>

R EXAMPLE : OR operator | 
<pre><code class="r">
> TRUE | TRUE   # TRUE if at least one is TRUE
[1] TRUE

> TRUE | FALSE
[1] TRUE

> FALSE | TRUE
[1] TRUE

> FALSE | FALSE  # FALSE if both are FALSE
[1] FALSE

> y <- 4
# TRUE    FALSE
> y < 5 | y > 15
[1] TRUE

> y <- 14
# FALSE    FALSE
> y < 5 | y > 15
[1] FALSE
</code></pre>

R EXAMPLE : NOT operator !
<pre><code class="r">
> !TRUE 
[1] FALSE

> !FALSE 
[1] TRUE

> !(x > 5)
> x >= 5

> is.numeric(5) 
[1] TRUE

> !is.numeric(5) 
[1] FALSE

> is.numeric("hello") 
[1] FALSE

> !is.numeric("hello") 
[1] TRUE
</code></pre>

R EXAMPLE : Logical Operators and Vectors
<pre><code class="r">
> c(TRUE, TRUE, FALSE) & c(TRUE, FALSE, FALSE)
[1] TRUE FALSE FALSE

> c(TRUE, TRUE, FALSE) | c(TRUE, FALSE, FALSE)
[1] TRUE TRUE FALSE

> !c(TRUE, TRUE, FALSE)
[1] FALSE FALSE TRUE
</code></pre>

R EXAMPLE : &amp; VS &amp;&amp;, | VS ||
<pre><code class="r">
> c(TRUE, TRUE, FALSE) & c(TRUE, FALSE, FALSE)
[1] TRUE FALSE FALSE

> c(TRUE, TRUE, FALSE) && c(TRUE, FALSE, FALSE)
[1] TRUE    # exams only the first element of each vector

> c(TRUE, TRUE, FALSE) | c(TRUE, FALSE, FALSE)
[1] TRUE TRUE FALSE

> c(TRUE, TRUE, FALSE) || c(TRUE, FALSE, FALSE)
[1] TRUE    # exams only the first element of each vector
</code></pre>

R EXAMPLE : Relational Operators 
R EXAMPLE : Equality ==
<pre><code class="r">
> TRUE == TRUE 
[1] TRUE

> TRUE == FALSE
[1] FALSE

> "hello" == "goodbye" 
[1] FALSE

> 3 == 2
[1] FALSE
</code></pre>

R EXAMPLE : Inequality !=
<pre><code class="r">
> TRUE != TRUE 
[1] FALSE

> TRUE != FALSE
[1] TRUE

> "hello" != "goodbye" 
[1] TRUE

> 3 != 2
[1] TRUE
</code></pre>


R EXAMPLE : < and >
<pre><code class="r">
> 3 < 5 
[1] TRUE

> 3 > 5 
[1] FALSE

> "hello" > "goodbye"  # Alphabetical Order 
[1] TRUE

> TRUE < FALSE # TRUE coerces to 1 and FALSE coerces to 0
[1] FALSE
</code></pre>

R EXAMPLE : <= and >=
<pre><code class="r">
> 5 >= 3 
[1] TRUE

> 3 >= 3 
[1] TRUE
</code></pre>

R EXAMPLE : Relational Operators and vectors
<pre><code class="r">
> linkedin <- c(16, 9, 13, 5, 2, 17, 14)
> linkedin
[1] 16 9 13 5 2 17 14

> linkedin > 10
[1] TRUE FALSE TRUE FALSE FALSE TRUE TRUE 

> facebook <- c(17, 7, 5, 16, 8, 13, 14)
> facebook
[1] 17 7 5 16 8 13 14

> facebook <= linkedin
[1] FALSE TRUE TRUE FALSE FALSE TRUE TRUE 
</code></pre>

R EXAMPLE : Functions fundamentals

<pre><code class="r">
my_fun <- function(arg1, arg2) {
  body
}

add <- function(x, y = 1) {
  x + y
}
</code></pre>

R EXAMPLE : Anatomy of a function
<pre><code class="r">
add <- function(x, y = 1) {
  x + y
}

> formals(add)
$x

$y
[1] 1

> body(add)
{
  x + y
}

> enviorment(add)
<enviroment: R_GlobalEnv>
</code></pre>

R EXAMPLE : Output: return value 
<pre><code class="r">
f <- function(x) {     # The last expression evaluated in a function is 
  if (x < 0) {         # the return value
    -x
   } else {
    x	
   }
}

         # absolute value  
> f(-5)
[1] 5

> f(15)
[1] 15

         # return(value) forces the function to stop 
            execution and return value
</code></pre>

R EXAMPLE : Functions are objects
<pre><code class="r">
> mean2 <- mean

> mean2(1:10)
[1] 5.5

> function(x) { x + 1 }
function(x) { x + 1 }

> (function(x) { x + 1 }) (2)
[1] 3
</code></pre>


R EXAMPLE : Scoping 
<pre><code class="r">
> x <- 10
> x 
[1] 10

f <- function() {    
  x <- 1
  y <- 2	
  c(x, y)
}

> f()
[1] 1 2
</code></pre>

R EXAMPLE : If a name isn't defined inside a function, r will look one level up
<pre><code class="r">
> x <- 2

g <- function() {    
  y <- 1	
  c(x, y)
}

> g()
[1] 2 1
</code></pre>

R EXAMPLE : if name isn't defined locally, or at a higher level, an error occurs
<pre><code class="r">
> rm(x)   # Remove our definition of x

g <- function() {    
  y <- 1	
  c(x, y)
}

> g()
Error in g() : object 'x' not found
</code></pre>

R EXAMPLE : Scoping describes where, not when to look for a value
<pre><code class="r">
> f <- function() x

> x <- 15

> f()
[1] 15

> x <- 20

> f()
[1] 20
</code></pre>

R EXAMPLE : Lookup works the same for functions
<pre><code class="r">
> l <- function(x) x + 1

> m <- function() {
    l <- function(x) x * 2
    l(10)
 }

> m()
[1] 20

> c <- 3

> c(c = c)
</code></pre>

R EXAMPLE : Each call to a function has its own clan environment
<pre><code class="r">
 j <- function() {
   if (!exists("a")) {    
      a <- 1
   } else {
      a <- a * 1
   }
   print(a)
}

>j()
[1] 1

>j()
[1] 1

> a
Error : object 'a' not found
</code></pre>

Summary
<ul>
   <li>When you call a function, a new environment is made for the function
       to do its work</li>

   <li>The new environment is populated with the argument values</li>

   <li>Objects are looked for first in this environment</li>

   <li>If they are not found, they are looked for in the enviornment that 
       the function was created in</li>
</ul>

R EXAMPLE : Data Structures

<br/>

R EXAMPLE : Two types of vectors in R
<pre><code class="r">
   Atomic vectors of six types:
      1 logical
      2 integer
      3 double
      4 character
      5 complex
      6 raw

Lists, aka recursive vectors, because lists can obtain other lists

Atomic vectors are homogeneous, lists can be heterogeneous
</code></pre>

R EXAMPLE : Every Vector has two key properties
<pre><code class="r">
# Its type, find with typeof()
> typeof(letters)
[1] "character"

> typeof(1:10)
[1] integer

# Its length, find width length()
> length(letters)
[1] 26

> x <- list("a", "b", 1:10)
> length(x)
[1] 3
</code></pre>

R EXAMPLE : Missing values
<pre><code class="r">
> typeof(NULL)
[1] "NULL"

> length(NULL)
[1] 0

> typeof(NA)
[1] "logical"

> length(NA)
[1] 1

# Null often used to indicate the absence of a vector

# NA used to indicate the absence of a value in a 
# vector a.k.a a mising vlaue
</code></pre>

R EXAMPLE : NA's inside vectors
<pre><code class="r">
> x <- c(1, 2, 3, NA, 5)

> x 
[1] 1 2 3 NA 5

> is.na(x)
[1] FALSE FALSE FALSE TRUE FALSE
</code></pre>

R EXAMPLE : Missing vlaues are contagious
<pre><code class="r">
> NA + 10
[1] NA

> NA / 2
[1] NA

> NA > 5
[1] NA

> 10 == NA 
[1] NA

> NA == NA
[1] NA
</code></pre>

R EXAMPLE : Lists
<pre><code>
   Useful because they can contail heterogeneous objects
   Complicaed return objects are often lists, i.e. from lm()
   Created with list()
   subset with [, [[, or $
      [ extracts a sublist
      [[ and $ extracts elements, remove a level of hierarchy
</code></pre>

R EXAMPLE : Subsetting lists
<pre><code class="r">
> a <- list(
    a = 1:3,
    b = "a string",
    c =  pi, 
    d =  list(-1, -5)
  )

> str(a[4])
List of 1
  $ d:List of 1
   ...$ : num -1
   ...$ : num -5

> str(a[[4]])
List of 2
   ...$ : num -1
   ...$ : num -5
</code></pre>
 
R EXAMPLE : For Loops in R
<pre><code class="r">
> primes_list <- list(2, 3, 5, 7, 11, 13)

> for (i in 1:length(primes_list)) {      # Sequence
   print(primes_list[[i]])                # Body
  }
					  # output
[1] 2
[1] 3
[1] 5
[1] 7
[1] 11
[1] 13
</code></pre>

R EXAMPLE : Looping over columns in a data frame
<pre><code class="r">
> df <- data.frame(
   a = rnorm(10), 
   b = rnorm(10), 
   c = rnorm(10), 
   d = rnorm(10) 
  )

> for (i in 1:ncol(df)) {
   print(median(df[[i]]))
}
</code></pre>

R EXAMPLE : Moving forward
<pre><code class="r">
A safer way to generate the sequence using seq_along()
saving output instead of printing it
</code></pre>


        <!-- pagination -->
        <a role="button" class="btn btn-primary float-left" 
        href="../labs/index.html">
        &larr; PREVIOUS: Labs</a>

        <a role="button" class="btn btn-primary float-right" 
        href="../field-reports/index.html">
        NEXT: Field Reports &rarr;</a><br/><br/>              
        </section>      
        
    <!-- jQuery library -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" 
            integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" 
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" 
            integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" 
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" 
            integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" 
            crossorigin="anonymous"></script>       
        <script src="../assets/javascripts/scale.fix.js"></script>   
    </body>
</html>
