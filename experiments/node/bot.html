<!DOCTYPE html> 
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Code Journal : Experiments :: Bot</title>   
    <!-- Latest compiled and minified CSS -->
    <!-- Font Awesome 5.7.0 -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" 
    integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" 
    crossorigin="anonymous">
    <!-- Bootstrap 3.3.7 -->    
    <link rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">    
    <!-- Highlight.js 9.13.1 -->     
    <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/styles/androidstudio.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>    
    <script>hljs.initHighlightingOnLoad();</script>        

    <!-- Custom Style Pygment and Icons -->
    <link rel="stylesheet" href="../../assets/stylesheets/styles.css">
    <link rel="stylesheet" href="../../assets/stylesheets/pygment_trac.css">
    <link rel="icon" href="../../assets/images/favicon.ico" type="image/gif">
    <link rel="shortcut icon" href="../../assets/images/favicon.png">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    </head>
    <body>
        <div class="wrapper">
            <!-- Header -->         
            <header>
                <img src="../../assets/images/pb_Image.png" class="img-fluid" alt="me"/>
                <p class="view">A Code Journal for 
                    <span class="fab fa-git-square" aria-hidden="true"></span>
                Hub Pages<br/>        

                <a href="https://github.com/keeyanajones/Journal" target="_blank">
                    <span class="fab fa-github"></span> 
                    View the Code Journal on GitHub</a></p>

                <button class="btn btn-md btn-default" type="button">
                    <span class="fab fa-java fa-2x"></span> 
                </button>                
                <button class="btn btn-md btn-default" type="button">
                    <span class="fab fa-python fa-2x"></span> 
                </button>                       
                <button class="btn btn-md btn-default" type="button">
                    <span class="fab fa-r-project  fa-2x"></span> 
                </button>                
                <button class="btn btn-md btn-default" type="button">
                    <span class="fab fa-js fa-2x"></span> 
                </button>                              

                <br/><br/>

                <a href="https://github.com/keeyanajones/">
                    <small><span class="fab fa-github-alt"></span>                 
                        Repositories and latest Contribution Activity</small></a>                 

                <br/>

                <!-- Download, Clone, or Fork -->
                <ul>    
                    <li><a href="https://github.com/keeyanajones/Journal/archive/master.zip">
                    <span class="fa fa-file-archive" aria-hidden="true"></span><br/>
                    Download <br/> ZIP</a></li>                  
                    <li><a href="https://github.com/keeyanajones/Journal">
                    <span class="fa fa-clone" aria-hidden="true"></span><br/>
                    Clone <br/> Desktop</a></li>                  
                    <li><a href="https://github.com/keeyanajones/Journal">
                    <span class="fa fa-code-branch" aria-hidden="true"></span><br/>
                    Fork On <br/> GitHub</a></li>
                </ul>                                 
            </header>
            <!-- ./header --> 
        </div>

        <section>       
        <h2><span class="fas fa-flask " aria-hidden="true"></span>
            <a name="experiments" class="anchor" href="#experiments">
                <span class="header-link"></span></a>
                    Bot</h2>

        <p><sup><span class="fa fa-calendar"></span>
            Last updated on May 7th, 2019</sup></p>

        <ol class="breadcrumb">
            <li><span class="fa fa-bookmark"></span>
                <a href="../../index.html"> Home </a></li>
            <li><a href="../index.html"><span class="fa fa-bookmark"></span>
                Experiments</a></li>
            <li class="active"><a href="#experiments">
                <span class="fa fa-bookmark"></span>
                Bot</a></li>                                
        </ol>  
            
        <p>This Bot conducts conversations via auditory or textual 
        methods to convincingly simulate how a human would behave 
        as a conversational partner, thereby passing the practical 
        purposes including customer service or information 
        acquisition. The experiment is to make a conversational AI
        to use the gaming messaging apps and speech based assistants
        to automate communication and personalize customer experiences.                    
        </p>

        <p>Bots can be classified into usage categories such as 
        conversational commerce (e-commerce via chat), analytics, 
        communication, customer support, design, developer tools, 
        education, entertainment, finance, food, games, health, HR, 
        marketing, news, personal, productivity, shopping, social, 
        sports, travel and utilities. 
        experiment                                      
        </p>

        <p>React Frontend and Express Backend</p>

        <!-----------------------
        //// bot :  Tab Navigation
        ------------------------>
        <div>
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
        <a href="#package" 
        aria-controls="package" 
        role="tab" data-toggle="tab">
        package.json</a></li>            
        <li role="presentation">
        <a href="#app" 
        aria-controls="app" 
        role="tab" data-toggle="tab">
        app.js</a></li>           
        <li role="presentation">
        <a href="#oauth" 
        aria-controls="oauth" 
        role="tab" data-toggle="tab">
        oauth.js</a></li>           
        </ul>
        <!------------------------------------------------// 
          Tab panes 
        // ----------------------------------------------->
        <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="package">
        See <span class="fa fa-file-code"></span>
        <a href="#package"> package.json</a>
        
<pre><code>// package.json
{ ...
"dependencies": {
// API Express Backend
"@mixer/client-node": "^3.3.1",
"carina": "^0.11.2",
"cookie-parser": "~1.4.3",
"cors": "^2.8.5",
"debug": "~2.6.9",
"ejs": "~2.5.7",
"express": "~4.16.0",
"http-errors": "~1.6.2",
"morgan": "~1.9.0",
"ws": "^6.2.1"
...
// Client React Frontend
"react": "^16.8.6",
"react-dom": "^16.8.6",
"react-scripts": "2.1.8"
...
}
...
}
</code></pre>
        </div>

        <div role="tabpanel" class="tab-pane" id="app">
        See <span class="fa fa-file-code"></span>
       <a href="#app">app.js</a>
       
<pre><code>// API Express Backend app.js
const createError = require('http-errors');
const express = require('express');
const tmi = require('tmi.js');// tmi.js module
const path = require('path');
const cookieParser = require('cookie-parser');
const logger = require('morgan');
const Discord = require('discord.js');// discord.js module
const Mixer = require('@mixer/client-node');// mixer module
const ws = require('ws');
const http = require('http');
const fs = require('fs');
const readline = require('readline');
const cors = require('cors');
const {google} = require('googleapis');
const Carina = require('carina').Carina;
const hostname = '127.0.0.1';
const port = 3000;
...
</code></pre>           
        </div> 

        <div role="tabpanel" class="tab-pane" id="oauth">
        See <span class="fa fa-file-code"></span>
       <a href="#oauth">oauth.js</a>        
       
<pre><code>// oauth.js
...
// This is the client ID and client secret that you obtained
// while registering the application
const clientID = '<your client id>'
const clientSecret = '<your client secret>'

const app = express();

// Declare the redirect route
app.get('/oauth/redirect', (req, res) => {
    // The req.query object has the query params that
    // were sent to this route. We want the `code` param
    const requestToken = req.query.code;

    someThing({
    // make a POST request
    method: 'post',
// to the Github authentication API, with the client ID, 
// client secret and request token
    url: `https://somewhere.com/login/oauth/access_token
        ?client_id=
        ${clientID}&client_secret=
        ${clientSecret}&code=
        ${requestToken}`,
// Set the content type header, so that we get the 
// response in JSOn
    headers: {
        accept: 'application/json'
    }
    }).then((response) => {
// Once we get the response, extract the access token from
// the response body
    const accessToken = response.data.access_token
// redirect the user to the welcome page, along with the 
// access token
    res.redirect(`/welcome.html?access_token=${accessToken}`);
    })
})
...
</code></pre>        
       
        </div>
        </div>
        </div>  
        
        <!------ /. bot  Tab panes   ------->        
        <h3>Commands List</h3>

        See <span class="fa fa-file-code"></span>
        <a href="#commandsList">commandsList.js</a>           
        
        <ul>
            INFORMATION
            <ul>
                <li><kbd>!bot</kbd> | 
                    <kbd>!info</kbd> | 
                    <kbd>!chatterlist</kbd>  | 
                    <kbd>!uptime</kbd>  | 
                    <kbd>!commands</kbd> | 
                    <kbd>!getlogs</kbd> </li>
            </ul>
            ROLES AND RANKS
            <ul>
                <li><kbd>!addrank {username} [rank]</kbd> | 
                    <kbd>!rank {username}</kbd> | 
                    <kbd>!ranks</kbd> | 
                    <kbd>!deleterank {username} [rank]</kbd> | 
                    <kbd>!addrole {username} [role]</kbd> |
                    <kbd>!roles</kbd> | 
                    <kbd>!roleinfo [role]</kbd> </li>
            </ul>
            MANAGEMENT
            <ul>
                <li><kbd>!announce {message}</kbd> | 
                    <kbd>!giveaway </kbd> | 
                    <kbd>!winner {username}</kbd> |                    
                    <kbd>!clean</kbd> | 
                    <kbd>!slow</kbd> | 
                    <kbd>!slow clear</kbd> |
                    <kbd>!mod {username}</kbd> | 
                    <kbd>!mod {username} clear</kbd></li>
            </ul>
            MODERATOR
            <ul>
                <li>
                    <kbd>!timeout {username} [duration]</kbd> |
                    <kbd>!timeout {username} clear</kbd> |      
                    <kbd>!kick {username}</kbd> | 
                    <kbd>!ban {username}</kbd>  | 
                    <kbd>!ban {username} clear</kbd> 
                    <kbd>!mute {username}</kbd> |
                    <kbd>!mute {username} clear</kbd> | 
                    <kbd>!warn {username}</kbd> | 
                    <kbd>!warn {username} clear</kbd> |
                </li>        
            </ul>
            MUSIC
            <ul>
                <li><kbd>!playlist</kbd> | 
                    <kbd>!now playing</kbd> | <br/>
                    <kbd>!play</kbd> | 
                    <kbd>!skip</kbd>  | 
                    <kbd>!stop</kbd> |  
                    <kbd>!seek</kbd> | 
                    <kbd>!next</kbd> </li>                    
            </ul>
            FUN
            <ul>
                <li><kbd>!whisper {username} [message]</kbd> | 
                    <kbd>!poll</kbd> | 
                    <kbd>!poll results</kbd> | 
                    <kbd>!google</kbd> | 
                    <kbd>!ask google</kbd> </li>
            </ul>
            MISC
            <ul>
                <li><kbd>!afk</kbd> | 
                    <kbd>!avatar</kbd> </li>
            </ul>
            TAGS
            <ul>
                <li><kbd>!tags</kbd> |
                    <kbd>!tag</kbd> | 
                    <kbd>!tag {name} clear</kbd> | 
                    <kbd>!edittag</kbd> </li>
            </ul>          
        </ul>
        
        <br/><br/>
        
        <h3><a name="mixer" class="anchor" href="#mixer">
        <span class="header-link"></span></a>                
        Bot API's</h3>        
        <!------------------------------------------------// 
        bot :  Tab Navigation
        // ----------------------------------------------->
        <div>
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
        <a href="#mixer" 
        aria-controls="mixer" 
        role="tab" data-toggle="tab">
        MIXER</a></li>            
        <li role="presentation">
        <a href="#twitch" 
        aria-controls="twitch" 
        role="tab" data-toggle="tab">
        TWITCH</a></li>           
        <li role="presentation">
        <a href="#youtube" 
        aria-controls="youtube" 
        role="tab" data-toggle="tab">
        YOUTUBE</a></li>           
        <li role="presentation">
        <a href="#discord" 
        aria-controls="discord" 
        role="tab" data-toggle="tab">
        DISCORD</a></li>
        </ul>
        
        <!------------------------------------------------// 
          Tab panes 
        // ----------------------------------------------->
        <div class="tab-content">
        <div role="tabpanel" class="tab-pane active" id="mixer">            
       See <span class="fa fa-file-code"></span> 
       <a href="#mixer-bot">       
       mixer-bot</a> 
<pre><code>
...
// require the mixer client node module
'use strict';
const Mixer = require('@mixer/client-node');
const ws = require('ws');
const Carina = require('carina').Carina;
Carina.WebSocket = ws;

const mixerAPIRouter = require('./routes/mixerAPI');
const app = express();

let userInfo;

const client = new Mixer.Client
              (new Mixer.DefaultRequestRunner());
const channelName = process.argv[2];

client.use(new Mixer.OAuthProvider(client, {
    clientId: 'clientId'
}));

// Live Update
const channelId = 1234;

const ca = new Carina({
    queryString: {
        'Client-ID': 'clientId'
    },
    isBot: true
}).open();

ca.subscribe(`channel:${channelId}:update`, data => {
    console.log(data);
});
// GET CHANNEL
client.request('GET', `channels/${channelName}`)
.then(res => {
  const viewers = res.body.viewersTotal;
  console.log(`You have ${viewers} 
               total viewers on Mixer ...`);

  let rank = 1;
// GET CHANNELS RANK    
  const run = (page) => {
    return client.request('GET', '/channels', {
          qs: {
              page,
              fields: 'viewersTotal',
              order: 'viewersTotal:DESC'
          }
    }).then(res => {
        for (let i = 0; i < res.body.length; i++) {
            const channel = res.body[i];
            if (channel.viewersTotal <= viewers) {
                console.log(`Your rank on Mixer is ${rank}!`);
                return;
            }
            rank++;
        }
        console.log(`Your rank is at least ${rank}...`);
        return run(page + 1);
    });
  };
  return run(0);
});

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'ejs');

app.use(cors());

app.use('/mixerAPI', mixerAPIRouter);

// With OAuth we don't need to log in. The OAuth Provider 
// will attach the required information to all of our 
// requests after this call.
client.use(new Mixer.OAuthProvider(client, {
    tokens: {
        access: 'token',
        expires: Date.now() + (365 * 24 * 60 * 60 * 1000)
    }
}));

// Gets the user that the Access Token we provided above 
// belongs to.
client.request('GET', 'users/current')
.then(response => {
    userInfo = response.body;
    return new 
      Mixer.ChatService(client).join(response.body.channel.id);
})
.then(response => {
    const body = response.body;
    return createChatSocket(userInfo.id, userInfo.channel.id, 
                            body.endpoints, body.authkey);
})
.catch(error => {
    console.error('Something went wrong with Mixer.');
    console.error(error);
});

/**
* Creates a Mixer chat socket and sets up listeners to various 
* chat events.
* @returns {Promise.<>}
*/
function createChatSocket (userId, channelId, 
                           endpoints, authkey) {
    // Chat connection
    const socket = new Mixer.Socket(ws, endpoints).boot();

    // Greet a joined user
    socket.on('UserJoin', data => {
        socket.call('msg', [`Hi ${data.username}! I\'m a bot! Write !ping and I will pong back!`]);
    });

    // React to our !pong command
    socket.on('ChatMessage', data => {
      if (data.message.message[0].data.toLowerCase().startsWith('!ping')) {
          socket.call('msg', [`@${data.user_name} PONG!`]);
          console.log(`Ponged ${data.user_name}`);
      }
    });

    // Handle errors
    socket.on('error', error => {
        console.error('Socket error');
        console.error(error);
    });

    return socket.auth(channelId, userId, authkey)
    .then(() => {
        console.log('Mixer Login Successful');
        return socket.call('msg', ['Hi! I\'m a bot! Write !ping and I will pong back!']);
    });
}

// catch 404 and forward to error handler
app.use(function(req, res, next) {
  next(createError(404));
});

// error handler
app.use(function(err, req, res, next) {
  // set locals, only providing error in development
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {};

  // render the error page
  res.status(err.status || 500);
  res.render('error');
});

module.exports = app;
</code></pre>     
        </div>

        <div role="tabpanel" class="tab-pane" id="twitch">
       See <span class="fa fa-file-code"></span>            
       <a href="#twitch-bot">       
       twitch-bot</a>       
<pre><code>
...
// require the twitch tmi.js module
const tmi = require('tmi.js');

const twitchAPIRouter = require('./routes/twitchAPI');

var app = express();

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'ejs');

app.use(cors());

app.use('/twitchAPI', twitchAPIRouter);

const tmi = require('tmi.js');

// Define configuration options
const opts = {
  identity: {
    username: ' ',
    password: ' '
  },
  channels: [
    ' '
  ]
};

// Create a client with our options
const client = new tmi.client(opts);

// Register our event handlers (defined below)
client.on('message', onMessageHandler);
client.on('connected', onConnectedHandler);

// Connect to Twitch:
client.connect();

// Called every time a message comes in
function onMessageHandler (target, context, msg, self) {
  if (self) { return; } // Ignore messages from the bot

  // Remove whitespace from chat message
  const commandName = msg.trim();

  // If the command is known, let's execute it
  if (commandName === '!dice') {
    const num = rollDice();
    client.say(target, `You rolled a ${num}`);
    console.log(`* Executed ${commandName} command`);
  } else {
    console.log(`* Unknown command ${commandName}`);
  }
}

// Function called when the "dice" command is issued
function rollDice () {
  const sides = 6;
  return Math.floor(Math.random() * sides) + 1;
}

// Called every time the bot connects to Twitch chat
function onConnectedHandler (addr, port) {
  console.log(`* Connected to ${addr}:${port}`);
}

// catch 404 and forward to error handler
app.use(function(req, res, next) {
  next(createError(404));
});

// error handler
app.use(function(err, req, res, next) {
  // set locals, only providing error in development
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {};

  // render the error page
  res.status(err.status || 500);
  res.render('error');
});

module.exports = app;
</code></pre>
        </div> 

        <div role="tabpanel" class="tab-pane" id="youtube">
       See <span class="fa fa-file-code"></span>            
       <a href="#youtube-bot">       
       youtube-bot</a>
<pre><code>
...
// require the google module
const fs = require('fs');
const readline = require('readline');
const {google} = require('googleapis');
const OAuth2 = google.auth.OAuth2;

const youtubeAPIRouter = require('./routes/youtubeAPI');

const app = express();

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'ejs');

app.use(cors());

app.use('/youtubeAPI', youtubeAPIRouter);

// If modifying these scopes, delete your previously saved credentials
// at ~/.credentials/youtube-nodejs-quickstart.json
const SCOPES = ['https://www.googleapis.com/auth/youtube.readonly'];
const TOKEN_DIR = (process.env.HOME || process.env.HOMEPATH ||
    process.env.USERPROFILE) + '/.credentials/';
const TOKEN_PATH = TOKEN_DIR + 'youtube-nodejs-quickstart.json';

// Load client secrets from a local file.
fs.readFile('client_secret.json', function processClientSecrets(err, content) {
  if (err) {
    console.log('Error loading client secret file: ' + err);
    return;
  }
  // Authorize a client with the loaded credentials, then call the YouTube API.
  authorize(JSON.parse(content), getChannel);
});

/**
 * Create an OAuth2 client with the given credentials, and 
 * then execute the given callback function.
 * @param {Object} credentials The authorization client 
 *                  credentials.
 * @param {function} callback The callback to call with the 
 *                    authorized client.
 */
function authorize(credentials, callback) {
  var clientSecret = credentials.installed.client_secret;
  var clientId = credentials.installed.client_id;
  var redirectUrl = credentials.installed.redirect_uris[0];
  var oauth2Client = new OAuth2(clientId, clientSecret, redirectUrl);

  // Check if we have previously stored a token.
  fs.readFile(TOKEN_PATH, function(err, token) {
    if (err) {
      getNewToken(oauth2Client, callback);
    } else {
      oauth2Client.credentials = JSON.parse(token);
      callback(oauth2Client);
    }
  });
}

/**
 * Get and store new token after prompting for user authorization, and then
 * execute the given callback with the authorized OAuth2 client.
 */
function getNewToken(oauth2Client, callback) {
  const authUrl = oauth2Client.generateAuthUrl({
    access_type: 'offline',
    scope: SCOPES
  });
  console.log('Authorize this app by visiting this url: ', authUrl);
  const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
  });
  rl.question('Enter the code from that page here: ', function(code) {
    rl.close();
    oauth2Client.getToken(code, function(err, token) {
      if (err) {
        console.log('Error while trying to retrieve access token', err);
        return;
      }
      oauth2Client.credentials = token;
      storeToken(token);
      callback(oauth2Client);
    });
  });
}

/**
 * Store token to disk be used in later program executions.
 * @param {Object} token The token to store to disk.
 */
function storeToken(token) {
  try {
    fs.mkdirSync(TOKEN_DIR);
  } catch (err) {
    if (err.code != 'EEXIST') {
      throw err;
    }
  }
  fs.writeFile(TOKEN_PATH, JSON.stringify(token), (err) => {
    if (err) throw err;
    console.log('Token stored to ' + TOKEN_PATH);
  });
  console.log('Token stored to ' + TOKEN_PATH);
}

/**
 * Lists the names and IDs of up to 10 files.
 * @param {google.auth.OAuth2} auth An authorized OAuth2 client.
 */
function getChannel(auth) {
  const service = google.youtube('v3');
  service.channels.list({
    auth: auth,
    part: 'snippet,contentDetails,statistics',
    forUsername: 'GoogleDevelopers'
  }, function(err, response) {
    if (err) {
      console.log('The API returned an error: ' + err);
      return;
    }
    const channels = response.data.items;
    if (channels.length == 0) {
      console.log('No channel found.');
    } else {
      console.log('This channel\'s ID is %s. Its title is \'%s\', and ' +
                  'it has %s views.',
                  channels[0].id,
                  channels[0].snippet.title,
                  channels[0].statistics.viewCount);
    }
  });
}

// catch 404 and forward to error handler
app.use(function(req, res, next) {
  next(createError(404));
});

// error handler
app.use(function(err, req, res, next) {
  // set locals, only providing error in development
  res.locals.message = err.message;
  res.locals.error = req.app.get('env') === 'development' ? err : {};

  // render the error page
  res.status(err.status || 500);
  res.render('error');
});

module.exports = app;            
</code></pre>            
        </div>

        <div role="tabpanel" class="tab-pane" id="discord">
       See <span class="fa fa-file-code"></span>            
       <a href="#discord-bot">
       discord-bot</a>
<pre><code> 
...
// require the discord.js module
const Discord = require('discord.js');

// Configuration file
const { prefix, token } = require('./config.json');

// create a new Discord client
const client = new Discord.Client();

const discordAPIRouter = require("./routes/discordAPI");

const app = express();

// view engine setup
app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'ejs');

app.use(cors());

app.use("/discordAPI", discordAPIRouter);

// catch 404 and forward to error handler
app.use(function(req, res, next) {
next(createError(404));
});

// error handler
app.use(function(err, req, res, next) {
// set locals, only providing error in development
res.locals.message = err.message;
res.locals.error = req.app.get('env') === 'development' ? err : {};

// render the error page
res.status(err.status || 500);
res.render('error');
});


// when the client is ready, run this code
// this event will only trigger one time after logging in
client.on ('ready', () => {
console.log("Conected as " + client.user.tag + " Ready!");

client.on('message', message => {
// send back "Welecome to my Discord Server!" to the channel 
// the message was sent in
if (message.content === '!kee') {
message.channel.send('Welcome to my Discord Server!');
}
});    

// client.user.setActivity        
// client.user.setActivity("with JavaScript");    
client.user.setActivity("Youtube", {type: "WATCHING"});

// CHANNEL 
client.guilds.forEach((guild) => {
console.log(guild.name);
guild.channels.forEach((channel) => {
console.log(` - ${channel.name} ${channel.type} ${channel.id}`);
});              
// General Channel id 398581574427213826                
});          
let generalChannel = client.channels.get("398581574427213826");
const attachment = 
new Discord.Attachment("https://keeyanajones.github.io/website/assets/img/avatar.png");    
generalChannel.send(attachment);
});

// MESSAGE 
client.on('message', (receivedMessage) => {
if (receivedMessage.author === client.user) {
return;   
}

// REPEAT MESSAGE
receivedMessage.channel.send("Message received : " + 
receivedMessage.author.toString() + " : " + 
receivedMessage.content);

receivedMessage.guild.emojis.forEach(customEmoji => {
console.log(`${customEmoji.name} ${customEmoji.id}`);
receivedMessage.react(customEmoji); 
});
});

// COMMANDS
client.on('message', message => {
if (!message.content.startsWith(prefix) || message.author.bot) return;

const args = message.content.slice(prefix.length).split(/ +/);
const command = args.shift().toLowerCase();

// PING 
if (command === 'ping') {
message.channel.send('Pong.');                
// DING
} else if (command === 'ding') { 
message.channel.send('Dong.');                
// BEEP                
} else if (command === 'beep') {
message.channel.send('Boop.');
// SERVER                
} else if (command === 'server') {
message.channel.send(`Server name: ${message.guild.name}
\nTotal members: ${message.guild.memberCount}`);
// USER-INFO                
} else if (command === 'user-info') {
message.channel.send(`Your username: ${message.author.username}
\nYour ID: ${message.author.id}`);
// INFO                
} else if (command === 'info') {
if (!args.length) {
return message.channel.send(`You didn't provide any arguments, ${message.author}!`);
} else if (args[0] === 'foo') {
return message.channel.send('bar');
}
message.channel.send(`First argument: ${args[0]}`);                
// KICK                
} else if (command === 'kick') {
if (!message.mentions.users.size) {
return message.reply('you need to tag a user in order to kick them!');
}

const taggedUser = message.mentions.users.first();

message.channel.send(`You wanted to kick: ${taggedUser.username}`);
// AVATAR                
} else if (command === 'avatar') {
if (!message.mentions.users.size) {
return message.channel.send(`Your avatar: 
<${message.author.displayAvatarURL}>`);
}

const avatarList = message.mentions.users.map(user => {
return `${user.username}'s avatar: <${user.displayAvatarURL}>`;                                             
});

message.channel.send(avatarList);
// PRUNE                
} else if (command === 'prune') {
const amount = parseInt(args[0]) + 1;

if (isNaN(amount)) {
return message.reply('that doesn\'t seem to be a valid number.');
} else if (amount <= 1 || amount > 100) {
return message.reply('you need to input a number between 1 and 99.');
}

message.channel.bulkDelete(amount, true).catch(err => {
console.error(err);
message.channel.send('there was an error trying to prune messages in this channel!');
});
}
});

// login to Discord with your app's token
client.login(token);

module.exports = app;</code></pre>            
        </div>      
            
        </div>
        </div>  
        <!------ /. bot  Tab panes   ------->

        <hr/>

        <!-- pagination -->
        <a role="button" class="btn btn-primary pull-left" 
        href="../index.html">
        &larr; PREVIOUS: Experiments</a>

        <a role="button" class="btn btn-primary pull-right" 
        href="../../appendix-projects/index.html">
        NEXT: Projects &rarr;</a><br/><br/>              
        </section>

        <!-- jQuery library -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" 
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" 
        crossorigin="anonymous"></script>         
        <script src="../assets/javascripts/scale.fix.js"></script>    
    </body>
</html>
